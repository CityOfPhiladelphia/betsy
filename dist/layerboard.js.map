{"version":3,"file":"layerboard.js","sources":["../src/util/is-mobile-device.js","../src/store.js","../src/util/config-mixin.js","../src/components/TopicPanel.vue","../src/components/markers-mixin.js","../src/components/MapPanel.vue","../src/components/Layerboard.vue","../src/util/merge-deep.js","../src/main.js"],"sourcesContent":["export default function () {\r\n  const mobileOrTabletRegexA = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\r\n  const mobileOrTabletRegexB = /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i;\r\n\r\n  // get the user agent and test against both regex patterns\r\n  const userAgent = (navigator.userAgent || navigator.vendor || window.opera || '');\r\n  const isMobileOrTablet = (mobileOrTabletRegexA.test(userAgent) ||\r\n                            mobileOrTabletRegexB.test(userAgent.substr(0,4)));\r\n\r\n  return isMobileOrTablet;\r\n};\r\n","import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport isMobileDevice from './util/is-mobile-device';\r\n\r\n// when you load vuex from a script tag this seems to happen automatically\r\nVue.use(Vuex);\r\n\r\n// function createStore(config, bennyEndpoints, bennyRepresentation) {\r\nfunction createStore(config) { //}, bennyEndpoints, bennyRepresentation) {\r\n\r\n  const initialState = {\r\n    isMobileOrTablet: isMobileDevice(),\r\n    fullScreenMapEnabled: false,\r\n    bennyEndpoints: {},\r\n    // bennyEndpoints2: {},\r\n    // bennyEndpoints3: [],\r\n    geocode: {\r\n      status: null,\r\n      data: null,\r\n      input: null,\r\n      related: null,\r\n    },\r\n    layers: {\r\n      layerUrls: {},\r\n      inputLayerFilter: '',\r\n      inputTagsFilter: '',\r\n    },\r\n    map: {\r\n      location: {\r\n        lat: null,\r\n        lng: null\r\n      },\r\n      center: config.map.center,\r\n      zoom: config.map.zoom,\r\n      scale: null,\r\n      map: null,\r\n      basemap: 'pwd',\r\n      imagery: 'imagery2017',\r\n      shouldShowImagery: false,\r\n      basemapLayers: {},\r\n      webMap: null,\r\n      webMapUrlLayer: null,\r\n      webMapActiveLayers: [],\r\n      webMapDisplayedLayers: [],\r\n      webMapLayersAndRest: [],\r\n      watchPositionOn: false,\r\n      intersectingFeatures: [],\r\n      popupCoords: null,\r\n      selectedPopupLayer: null,\r\n      categories: [],\r\n      selectedCategory: '',\r\n      // webMapGeoJson: {}\r\n    },\r\n    shouldShowAddressCandidateList: false,\r\n    candidates: [],\r\n    addressEntered: null,\r\n    cyclomedia: {\r\n      initialized: false,\r\n      navBarOpen: false,\r\n      latLngFromMap: null,\r\n      orientation: {\r\n        yaw: null,\r\n        hFov: null,\r\n        xyz: null,\r\n      },\r\n      active: false,\r\n      recordings: [],\r\n    },\r\n    pictometry: {\r\n      ipa: null,\r\n      active: false,\r\n      shapeIds: [],\r\n      pngMarkerIds: [],\r\n      zoom: null,\r\n      // this is the state of the main leaflet map. when these values change\r\n      // the pictometry widget should react. the reason these are duplicated\r\n      // here is to avoid an infinite loop in the Map component when the\r\n      // viewport changes.\r\n      map: {\r\n        center: config.map.center,\r\n        zoom: config.map.zoom\r\n      }\r\n    },\r\n    lastSearchMethod: null,\r\n    // this gets set to true on a mobile device when the user clicks the\r\n    // \"See Datasets\" button\r\n    didToggleTopicsOn: false,\r\n    shouldShowTopics: true,\r\n    shouldShowMap: true,\r\n    windowWidth: 0,\r\n    route: null,\r\n    modals: {\r\n      help: {\r\n        open: false\r\n      }\r\n    }\r\n  };\r\n\r\n  // const TOGGLE_MODAL = 'modal/TOGGLE_MODAL'\r\n  // const CLOSE_MODALS = 'modal/CLOSE_MODALS'\r\n\r\n  // TODO standardize how payloads are passed around/handled\r\n  return new Vuex.Store({\r\n    state: initialState,\r\n    getters: {},\r\n    mutations: {\r\n      setCyclomediaInitialized(state, payload) {\r\n        state.cyclomedia.initialized = payload;\r\n      },\r\n      setIsMobileOrTablet(state, payload) {\r\n        state.isMobileOrTablet = payload;\r\n      },\r\n      setFullScreenMapEnabled(state, payload) {\r\n        state.fullScreenMapEnabled = payload;\r\n      },\r\n      setCategories(state, payload) {\r\n        state.map.categories = payload;\r\n      },\r\n      setSelectedCategory(state, payload) {\r\n        state.map.selectedCategory = payload;\r\n      },\r\n      setSelectedPopupLayer(state, payload) {\r\n        state.map.selectedPopupLayer = payload;\r\n      },\r\n      setIntersectingFeatures(state, payload) {\r\n        state.map.intersectingFeatures = payload;\r\n      },\r\n      setPopupCoords(state, payload) {\r\n        state.map.popupCoords = payload;\r\n      },\r\n      setBennyEndpoints(state, payload) {\r\n        state.bennyEndpoints = payload;\r\n      },\r\n      setBennyEndpoints2(state, payload) {\r\n        state.bennyEndpoints2 = payload;\r\n      },\r\n      setBennyEndpoints3(state, payload) {\r\n        state.bennyEndpoints3 = payload;\r\n      },\r\n      setLocation(state, payload) {\r\n        state.map.location.lat = payload.lat;\r\n        state.map.location.lng = payload.lng;\r\n      },\r\n      setWatchPositionOn(state, payload) {\r\n        state.map.watchPositionOn = payload;\r\n      },\r\n      setLayerUrls(state, payload) {\r\n        state.layers.layerUrls = payload;\r\n      },\r\n      setInputLayerFilter(state, payload) {\r\n        state.layers.inputLayerFilter = payload;\r\n      },\r\n      setInputTagsFilter(state, payload) {\r\n        state.layers.inputTagsFilter = payload;\r\n      },\r\n      setMap(state, payload) {\r\n        state.map.map = payload.map;\r\n      },\r\n      setWebMap(state, payload) {\r\n        state.map.webMap = payload;\r\n      },\r\n      setWebMapUrlLayer(state, payload) {\r\n        state.map.webMapUrlLayer = payload;\r\n      },\r\n      setWebMapActiveLayers(state, payload) {\r\n        state.map.webMapActiveLayers = payload;\r\n      },\r\n      setWebMapDisplayedLayers(state, payload) {\r\n        state.map.webMapDisplayedLayers = payload;\r\n      },\r\n      setWebMapLayersAndRest(state, payload) {\r\n        state.map.webMapLayersAndRest = payload;\r\n      },\r\n      setWebMapLayersOpacity(state, payload) {\r\n        // console.log('SETWEBMAPLAYERSOPACITY IS RUNNING', payload);\r\n        // let opa = state.map.webMapLayersAndRest.filter(layer => layer.layerName === payload.layerName)[0].opacity\r\n        // console.log('OPACITY BEFORE', state.map.webMapLayersAndRest.filter(layer => layer.title === payload.layerName)[0].opacity);\r\n        state.map.webMapLayersAndRest.filter(layer => layer.title === payload.layerName)[0].opacity = payload.opa;\r\n        // console.log('OPACITY AFTER', state.map.webMapLayersAndRest.filter(layer => layer.title === payload.layerName)[0].opacity);\r\n        //   return currentLayer[0];\r\n        // console.log('SETWEBMAPLAYERSOPACITY FINISHED RUNNING');\r\n      },\r\n      // setWebMapGeoJson(state, payload) {\r\n      //   // const layerName = payload.layerName;\r\n      //   // const json = payload.json;\r\n      //   console.log('payload', payload);\r\n      //   // state.map.webMapGeoJson[payload[]] = payload[json];\r\n      //   state.map.webMapGeoJson = payload;\r\n      // },\r\n\r\n      setLegend(state, payload) {\r\n        state.map.webMapLayersAndRest.filter(layer => layer.title === payload.layerName)[0].legend = payload.legend;\r\n      },\r\n\r\n\r\n      setMapScale(state, payload) {\r\n        state.map.scale = payload\r\n      },\r\n      setBasemap(state, payload) {\r\n        state.map.basemap = payload;\r\n      },\r\n      setImagery(state, payload) {\r\n        state.map.imagery = payload;\r\n      },\r\n      setShouldShowImagery(state, payload) {\r\n        state.map.shouldShowImagery = payload;\r\n      },\r\n      // setLastSearchMethod(state, payload) {\r\n      //   state.lastSearchMethod = payload;\r\n      // },\r\n\r\n\r\n      setMapCenter(state, payload) {\r\n        state.map.center = payload;\r\n      },\r\n      setMapZoom(state, payload) {\r\n        state.map.zoom = payload\r\n      },\r\n      setGeocodeStatus(state, payload) {\r\n        state.geocode.status = payload;\r\n      },\r\n      setGeocodeData(state, payload) {\r\n        state.geocode.data = payload;\r\n      },\r\n      setGeocodeRelated(state, payload) {\r\n        state.geocode.related = payload;\r\n      },\r\n      setGeocodeInput(state, payload) {\r\n        state.geocode.input = payload;\r\n      },\r\n      setPictometryActive(state, payload) {\r\n        if (!config.pictometry.enabled) {\r\n          return;\r\n        }\r\n        state.pictometry.active = payload;\r\n      },\r\n      setPictometryIpa(state, payload) {\r\n        state.pictometry.ipa = payload;\r\n      },\r\n      setPictometryShapeIds(state, payload) {\r\n        state.pictometry.shapeIds = payload;\r\n      },\r\n      setPictometryPngMarkerIds(state, payload) {\r\n        state.pictometry.pngMarkerIds = payload;\r\n      },\r\n      setPictometryMapCenter(state, payload) {\r\n        state.pictometry.map.center = payload;\r\n      },\r\n      setPictometryMapZoom(state, payload) {\r\n        state.pictometry.map.zoom = payload;\r\n      },\r\n      setPictometryZoom(state, payload) {\r\n        state.pictometry.zoom = payload;\r\n      },\r\n      setCyclomediaActive(state, payload) {\r\n        if (!config.cyclomedia.enabled) {\r\n          return;\r\n        }\r\n        state.cyclomedia.active = payload;\r\n      },\r\n      setCyclomediaYaw(state, payload) {\r\n        state.cyclomedia.orientation.yaw = payload\r\n      },\r\n      setCyclomediaHFov(state, payload) {\r\n        state.cyclomedia.orientation.hFov = payload\r\n      },\r\n      setCyclomediaXyz(state, payload) {\r\n        state.cyclomedia.orientation.xyz = payload\r\n      },\r\n      setCyclomediaRecordings(state, payload) {\r\n        state.cyclomedia.recordings = payload;\r\n      },\r\n      setCyclomediaLatLngFromMap(state, payload) {\r\n        state.cyclomedia.latLngFromMap = payload;\r\n        // const { lat, lng } = payload || {};\r\n        // state.cyclomedia.latLngFromMap[0] = lat;\r\n        // state.cyclomedia.latLngFromMap[1] = lng;\r\n      },\r\n      setCyclomediaNavBarOpen(state, payload) {\r\n        state.cyclomedia.navBarOpen = payload;\r\n      },\r\n      setDidToggleTopicsOn(state, payload) {\r\n        state.didToggleTopicsOn = payload;\r\n      },\r\n      setShouldShowTopics(state, payload) {\r\n        state.shouldShowTopics = payload;\r\n      },\r\n      setShouldShowMap(state, payload) {\r\n        state.shouldShowMap = payload;\r\n      },\r\n      setWindowWidth(state, payload) {\r\n        state.windowWidth = payload;\r\n      },\r\n\r\n      setRoute(state, payload) {\r\n        state.route = payload;\r\n      },\r\n      setDidToggleModal(state, {name, open}) {\r\n        console.log('setDidToggleModal, name:', name, 'open:', open);\r\n        state.modals[name].open = open === null ? !state.modals[name].open : open\r\n      },\r\n      // [types.TOGGLE_MODAL] (state, {name, open}) {\r\n      //   state.modals[name].open = open === null ? !state.modals[name].open : open\r\n      // },\r\n      // [types.CLOSE_MODALS] (state) {\r\n      //   for (let modalName in state.modals) {\r\n      //     state.modals[modalName].open = false\r\n      //   }\r\n      // }\r\n      setShouldShowAddressCandidateList(state, payload) {\r\n        state.shouldShowAddressCandidateList = payload;\r\n      },\r\n      setCandidates(state, payload) {\r\n        state.candidates = payload;\r\n      },\r\n      setAddressEntered(state, payload) {\r\n        state.addressEntered = payload;\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport default createStore;\r\n","// shout out to airyland\r\n// https://github.com/airyland/vue-config/blob/master/index.js\r\n\r\nexport default (Vue, config) => {\r\n  Vue.mixin({\r\n    created() {\r\n      this.$config = config;\r\n    }\r\n  });\r\n};\r\n","<template>\r\n  <div id=\"topic-panel-container\"\r\n       :class=\"this.topicPanelContainerClass\"\r\n  >\r\n  <!-- class=\"cell medium-8 small-order-2 medium-order-1\" -->\r\n      <div class=\"cell\">\r\n        <div class=\"forms-header\">\r\n\r\n          <!-- layer filter -->\r\n          <form @submit.prevent=\"handleLayerFilterFormX\"\r\n                @keydown=\"preventEnter\"\r\n                class=\"om-search-control-input\"\r\n          >\r\n            <div class=\"input-group text-filter\">\r\n              <span class=\"input-group-label input-font\">Filter By Text:</span>\r\n              <input\r\n                     type=\"text\"\r\n                     class=\"input-type\"\r\n                     @keyup=\"handleLayerFilterFormKeyup\"\r\n              />\r\n              <!-- placeholder=\"Filter datasets\" -->\r\n              <div class=\"input-group-button\"\r\n                   v-if=\"this.$store.state.layers.inputLayerFilter != ''\"\r\n              >\r\n\r\n                <button class=\"om-search-control-button\">\r\n                  <i class=\"fa fa-times fa-lg\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n          <!-- tags filter -->\r\n          <form @submit.prevent=\"handleTagsFilterFormX\"\r\n                @keydown=\"preventEnter\"\r\n                class=\"om-search-control-input-tags\"\r\n          >\r\n            <div class=\"input-group text-filter\">\r\n              <span class=\"input-group-label input-font\">Filter By Tags:</span>\r\n              <input\r\n                     type=\"text\"\r\n                     class=\"input-type\"\r\n                     @keyup=\"handleTagsFilterFormKeyup\"\r\n              />\r\n              <!-- placeholder=\"Filter datasets\" -->\r\n              <div class=\"input-group-button\"\r\n                   v-if=\"this.$store.state.layers.inputTagsFilter != ''\"\r\n              >\r\n\r\n                <button class=\"om-search-control-button\">\r\n                  <i class=\"fa fa-times fa-lg\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n          <!-- categories filter -->\r\n          <!-- <div class=\"input-group\">\r\n            <span class=\"input-group-label input-font\">Filter By Category:</span>\r\n\r\n            <select @change=\"didSelectCategory\"\r\n                    class=\"input-select\"\r\n            >\r\n              <option v-for=\"category in this.categories\"\r\n                      value=\"category\"\r\n              >\r\n                {{ category }}\r\n              </option>\r\n            </select>\r\n          </div> -->\r\n        </div>\r\n      <!-- </div> -->\r\n\r\n        <div class=\"topics-container cell medium-cell-block-y\"\r\n             id=\"topics-container\"\r\n        >\r\n          <form action=\"#/\">\r\n            <fieldset class=\"options\">\r\n              <!-- <ul class=\"no-bullet\"> -->\r\n                <checkbox v-for=\"(currentWmLayer, index) in this.currentWmLayers\"\r\n                          :layer=\"currentWmLayer.layer\"\r\n                          :layerName=\"currentWmLayer.title\"\r\n                          :layerId=\"currentWmLayer.id\"\r\n                          :layerDefinition=\"currentWmLayer.rest.layerDefinition\"\r\n                          :opacity=\"currentWmLayer.opacity\"\r\n                          :legend=\"currentWmLayer.legend\"\r\n                          :key=\"currentWmLayer.id\"\r\n                          :tags=\"currentWmLayer.tags\"\r\n                >\r\n                </checkbox>\r\n              <!-- </ul> -->\r\n            </fieldset>\r\n          </form>\r\n        </div>\r\n\r\n      </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import * as philaVueComps from '@cityofphiladelphia/phila-vue-comps';\r\n  const Checkbox = philaVueComps.Checkbox\r\n\r\n  export default {\r\n    components: {\r\n      Checkbox\r\n    },\r\n    computed: {\r\n      windowWidth() {\r\n        return this.$store.state.windowWidth;\r\n      },\r\n      fullScreenMapEnabled() {\r\n        return this.$store.state.fullScreenMapEnabled;\r\n      },\r\n      topicPanelContainerClass() {\r\n        if (this.fullScreenMapEnabled) {\r\n          return 'cell medium-1 small-order-2 medium-order-1'\r\n        } else if (this.windowWidth >= 950) {\r\n          return 'cell medium-8 small-order-1 small-24 medium-order-2';\r\n        } else {\r\n          return 'cell medium-10 small-order-1 small-24 medium-order-2';\r\n        }\r\n      },\r\n      categories() {\r\n        return this.$store.state.map.categories;\r\n      },\r\n      selectedCategory() {\r\n        return this.$store.state.map.selectedCategory;\r\n      },\r\n      scale() {\r\n        return this.$store.state.map.scale;\r\n      },\r\n      currentWmLayers() {\r\n        const layers = this.$store.state.map.webMapLayersAndRest;\r\n        let currentLayers = [];\r\n        for (let layer of layers) {\r\n          if (layer.tags) {\r\n            if (\r\n              layer.title.toLowerCase().includes(this.inputLayerFilter.toLowerCase()) && layer.tags.join().toLowerCase().includes(this.inputTagsFilter.toLowerCase()) && layer.category.includes(this.selectedCategory)\r\n              || this.$store.state.map.webMapActiveLayers.includes(layer.title)\r\n            ) {\r\n              // if (this.inputTagsFilter !== '') {\r\n              //   for (let layerTag of layer.tags) {\r\n              //     if (layerTag.toLowerCase().includes(this.inputTagsFilter.toLowerCase())) {\r\n              //       console.log('layerTag:', layerTag);\r\n              //     }\r\n              //   }\r\n              // }\r\n              currentLayers.push(layer)\r\n            }\r\n          } else if (this.inputTagsFilter !== '') {\r\n            continue;\r\n          } else {\r\n            if (\r\n              layer.title.toLowerCase().includes(this.inputLayerFilter.toLowerCase()) && layer.category.includes(this.selectedCategory)\r\n              || this.$store.state.map.webMapActiveLayers.includes(layer.title)\r\n            ) {\r\n              currentLayers.push(layer)\r\n            }\r\n          }\r\n        }\r\n        return currentLayers;\r\n      },\r\n      inputLayerFilter() {\r\n        return this.$store.state.layers.inputLayerFilter;\r\n      },\r\n      inputTagsFilter() {\r\n        return this.$store.state.layers.inputTagsFilter;\r\n      },\r\n      windowSize() {\r\n        return this.$store.state.windowSize;\r\n      },\r\n    },\r\n    methods: {\r\n      handleLayerFilterFormKeyup(e) {\r\n        const input = e.target.value;\r\n        this.$store.commit('setInputLayerFilter', input);\r\n      },\r\n      handleLayerFilterFormX(e) {\r\n        e.target[0].value = ''\r\n        this.$store.commit('setInputLayerFilter', '');\r\n      },\r\n      handleTagsFilterFormKeyup(e) {\r\n        const input = e.target.value;\r\n        // if (input.length >= 3) {\r\n        this.$store.commit('setInputTagsFilter', input);\r\n        // } else {\r\n          // this.$store.commit('setInputLayerFilter', null);\r\n        // }\r\n      },\r\n      handleTagsFilterFormX(e) {\r\n        e.target[0].value = ''\r\n        this.$store.commit('setInputTagsFilter', '');\r\n      },\r\n      didSelectCategory(e) {\r\n        const selected = e.target.selectedIndex;\r\n        this.$store.commit('setSelectedCategory', this.categories[selected]);\r\n      },\r\n      preventEnter(e) {\r\n        if(e.keyCode === 13) {\r\n          e.preventDefault();\r\n        }\r\n      },\r\n    },\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .forms-header {\r\n    padding: 5px;\r\n    /*this keeps the box shadow over the scrollable part of the panel*/\r\n    position: relative;\r\n    z-index: 1;\r\n    -webkit-box-shadow: 0px 5px 7px -2px rgba(0,0,0,0.18);\r\n    -moz-box-shadow: 0px 5px 7px -2px rgba(0,0,0,0.18);\r\n    box-shadow: 0px 5px 7px -2px rgba(0,0,0,0.18);\r\n  }\r\n\r\n  .input-type {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  .input-select {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  .input-group {\r\n    height: 40px !important;\r\n    margin-top: 6px;\r\n    margin-bottom: 6px;\r\n  }\r\n\r\n  .input-group-label {\r\n    border-right: 1px;\r\n    border-style: solid;\r\n    padding-left: 8px;\r\n    padding-right: 8px;\r\n    padding-top: 0px;\r\n    padding-bottom: 0px;\r\n    height: 20px !important;\r\n  }\r\n\r\n  .topics-container {\r\n    padding: 20px;\r\n    overflow-y: scroll;\r\n  }\r\n\r\n  .topics-container {\r\n    /* height: calc(100vh - 220px); */\r\n    /* height: calc(100vh - 268px); */\r\n    height: calc(100vh - 218px);\r\n  }\r\n\r\n  /* @media screen and (max-width: 40em) { */\r\n  @media screen and (max-width: 750px) {\r\n    .topics-container {\r\n      /* height: calc(100vh - 256px); */\r\n      height: calc(100vh - 300px);\r\n    }\r\n  }\r\n\r\n  .om-search-control-container {\r\n    border-radius: 2px;\r\n    box-shadow:0 2px 4px rgba(0,0,0,0.2),0 -1px 0px rgba(0,0,0,0.02);\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n    width: inherit;\r\n  }\r\n\r\n  .om-search-control-button {\r\n    width: 40px;\r\n    background: #ccc;\r\n    float: right;\r\n  }\r\n\r\n  .om-search-control-input {\r\n    font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n    font-size: 16px;\r\n  }\r\n\r\n  .om-search-control-input-tags {\r\n    font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n    font-size: 16px;\r\n  }\r\n\r\n  .input-font {\r\n    font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n    font-size: 16px;\r\n  }\r\n\r\n</style>\r\n","export default {\r\n  computed: {\r\n    // returns map markers as simple object with a geometry property, key,\r\n    // and optional properties for symbology\r\n    markers() {\r\n      const markers = [];\r\n      // geocoded address marker\r\n      const geocodeGeom = this.geocodeGeom;\r\n      if (geocodeGeom) {\r\n        const latlng = [...geocodeGeom.coordinates].reverse();\r\n        const key = this.geocodeResult.properties.street_address;\r\n        const addressMarker = {latlng, key};\r\n        markers.push(addressMarker);\r\n      }\r\n      return markers;\r\n    },\r\n    locationMarker() {\r\n      const latlngArray = [this.$store.state.map.location.lat, this.$store.state.map.location.lng]\r\n      const marker = {\r\n        latlng: latlngArray,\r\n        radius: 6,\r\n        fillColor: '#ff3f3f',\r\n        color: '#ff0000',\r\n        weight: 1,\r\n        opacity: 1,\r\n        fillOpacity: 1.0\r\n      }\r\n      return marker;\r\n    },\r\n  },\r\n};\r\n","<template>\r\n  <div id=\"map-panel-container\"\r\n       :class=\"this.mapPanelContainerClass\"\r\n  >\r\n    <full-screen-map-toggle-tab v-once />\r\n    <map_ :class=\"{ 'mb-map-with-widget': this.$store.state.cyclomedia.active || this.$store.state.pictometry.active }\"\r\n          id=\"map-tag\"\r\n          :center=\"this.mapCenter\"\r\n          :zoom=\"this.$store.state.map.zoom\"\r\n          @l-click=\"handleMapClick\"\r\n          @l-moveend=\"handleMapMove\"\r\n          zoom-control-position=\"bottomright\"\r\n          :min-zoom=\"this.$config.map.minZoom\"\r\n          :max-zoom=\"22\"\r\n    >\r\n\r\n    <!-- <polygon_ -->\r\n    <polygon_ v-if=\"this.selectedPopupLayerGeometryType === 'Polygon' || this.selectedPopupLayerGeometryType === 'MultiPolygon'\"\r\n              :color=\"'#00ffff'\"\r\n              :fill=\"false\"\r\n              :weight=\"5\"\r\n              :latlngs=\"this.selectedPopupLayerCoordinatesFlipped\"\r\n              :pane=\"'highlightOverlay'\"\r\n    />\r\n    <polyline_ v-if=\"this.selectedPopupLayerGeometryType === 'LineString'\"\r\n              :color=\"'#00ffff'\"\r\n              :weight=\"4\"\r\n              :latlngs=\"this.selectedPopupLayerCoordinatesFlipped\"\r\n              :pane=\"'highlightOverlay'\"\r\n    />\r\n    <circle-marker v-if=\"this.selectedPopupLayerGeometryType === 'Point'\"\r\n                   :latlng=\"this.selectedPopupLayerCoordinatesFlipped\"\r\n                   :radius=\"7\"\r\n                   :fillColor=\"'#00ffff'\"\r\n                   :color=\"'#00ffff'\"\r\n                   :weight=\"this.locationMarker.weight\"\r\n                   :opacity=\"this.locationMarker.opacity\"\r\n                   :fillOpacity=\"this.locationMarker.fillOpacity\"\r\n                   :pane=\"'highlightOverlay'\"\r\n    />\r\n\r\n      <!-- webmap -->\r\n      <esri-web-map>\r\n        <esri-web-map-layer v-for=\"(layer, key) in this.$store.state.map.webMapLayersAndRest\"\r\n                            v-if=\"shouldShowFeatureLayer(layer)\"\r\n                            :key=\"key\"\r\n                            :layer=\"layer.layer\"\r\n                            :layerName=\"layer.title\"\r\n                            :layerDefinition=\"layer.rest.layerDefinition\"\r\n                            :opacity=\"layer.opacity\"\r\n                            :type=\"layer.type2\"\r\n        />\r\n      </esri-web-map>\r\n      <pop-up v-if=\"this.shouldShowPopup\">\r\n        <pop-up-content />\r\n      </pop-up>\r\n\r\n\r\n      <!-- basemaps -->\r\n      <esri-tiled-map-layer v-for=\"(basemap, key) in this.$config.map.basemaps\"\r\n                         v-if=\"activeBasemap === key\"\r\n                         :key=\"key\"\r\n                         :name=\"key\"\r\n                         :url=\"basemap.url\"\r\n                         :max-zoom=\"basemap.maxZoom\"\r\n                         :zIndex=\"basemap.zIndex\"\r\n                         :attribution=\"basemap.attribution\"\r\n      />\r\n\r\n      <!-- basemap labels and parcels outlines -->\r\n      <esri-tiled-map-layer v-for=\"(tiledLayer, key) in this.$config.map.tiledLayers\"\r\n                         v-if=\"activeTiles.includes(key)\"\r\n                         :key=\"key\"\r\n                         :name=\"key\"\r\n                         :url=\"tiledLayer.url\"\r\n                         :zIndex=\"tiledLayer.zIndex\"\r\n                         :attribution=\"tiledLayer.attribution\"\r\n      />\r\n\r\n      <vector-marker v-for=\"(marker, index) in markers\"\r\n                    :latlng=\"marker.latlng\"\r\n                    :key=\"marker.key\"\r\n      />\r\n\r\n      <!-- marker using a png and ablility to rotate it -->\r\n      <png-marker v-if=\"this.cyclomediaActive\"\r\n                  :icon=\"'../../src/assets/camera.png'\"\r\n                  :latlng=\"cycloLatlng\"\r\n                  :rotationAngle=\"cycloRotationAngle\"\r\n      />\r\n\r\n      <!-- marker using custom code extending icons - https://github.com/iatkin/leaflet-svgicon -->\r\n      <svg-view-cone-marker v-if=\"this.cyclomediaActive\"\r\n                            :latlng=\"cycloLatlng\"\r\n                            :rotationAngle=\"cycloRotationAngle\"\r\n                            :hFov=\"cycloHFov\"\r\n      />\r\n\r\n      <control-corner :vSide=\"'top'\"\r\n                      :hSide=\"'almostright'\"\r\n      >\r\n      </control-corner>\r\n\r\n      <control-corner :vSide=\"'top'\"\r\n                      :hSide=\"'almostleft'\"\r\n      >\r\n      </control-corner>\r\n\r\n      <div v-once>\r\n        <basemap-toggle-control v-if=\"shouldShowImageryToggle\"\r\n                                v-once\r\n                                :position=\"'topright'\"\r\n        />\r\n      </div>\r\n\r\n      <div v-once>\r\n        <basemap-select-control\r\n                       :position=\"'topalmostright'\"\r\n        />\r\n      </div>\r\n\r\n      <div v-once>\r\n        <pictometry-button v-if=\"this.shouldShowPictometryButton\"\r\n                           v-once\r\n                           :position=\"'topright'\"\r\n                           :link=\"'pictometry'\"\r\n                           :imgSrc=\"'../../src/assets/pictometry.png'\"\r\n        />\r\n      </div>\r\n\r\n      <div v-once>\r\n        <cyclomedia-button v-if=\"this.shouldShowCyclomediaButton\"\r\n                           v-once\r\n                           :position=\"'topright'\"\r\n                           :link=\"'cyclomedia'\"\r\n                           :imgSrc=\"'../../src/assets/cyclomedia.png'\"\r\n                           @click=\"handleCyclomediaButtonClick\"\r\n        />\r\n      </div>\r\n\r\n      <div v-once>\r\n        <measure-control :position=\"'bottomleft'\" />\r\n      </div>\r\n\r\n      <div v-once>\r\n        <location-control v-once\r\n                          v-if=\"this.geolocationEnabled\"\r\n                          :position=\"'bottomright'\"\r\n                          @click=\"handleButtonClick\"\r\n        />\r\n      </div>\r\n\r\n      <!-- search control -->\r\n      <div v-once>\r\n        <AddressInput :position=\"this.addressInputPosition\" />\r\n      </div>\r\n      <AddressCandidateList v-if=\"this.addressAutocompleteEnabled\"\r\n                            :position=\"this.addressInputPosition\"\r\n      />\r\n\r\n      <!-- location marker -->\r\n      <circle-marker v-if=\"this.$store.state.map.location.lat != null\"\r\n                     :latlng=\"this.locationMarker.latlng\"\r\n                     :radius=\"this.locationMarker.radius\"\r\n                     :fillColor=\"this.locationMarker.fillColor\"\r\n                     :color=\"this.locationMarker.color\"\r\n                     :weight=\"this.locationMarker.weight\"\r\n                     :opacity=\"this.locationMarker.opacity\"\r\n                     :fillOpacity=\"this.locationMarker.fillOpacity\"\r\n                     :pane=\"'highlightOverlay'\"\r\n      />\r\n\r\n      <cyclomedia-recording-circle v-for=\"recording in cyclomediaRecordings\"\r\n                                   v-if=\"cyclomediaActive\"\r\n                                   :key=\"recording.imageId\"\r\n                                   :imageId=\"recording.imageId\"\r\n                                   :latlng=\"[recording.lat, recording.lng]\"\r\n                                   :size=\"1.2\"\r\n                                   :color=\"'#3388ff'\"\r\n                                   :weight=\"1\"\r\n                                   @l-click=\"handleCyclomediaRecordingClick\"\r\n      />\r\n    </map_>\r\n    <modal-about></modal-about>\r\n    <slot class='widget-slot' name=\"cycloWidget\" />\r\n    <slot class='widget-slot' name=\"pictWidget\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import * as L from 'leaflet';\r\n  import * as philaVueMapping from '@cityofphiladelphia/phila-vue-mapping';\r\n\r\n  // mixins\r\n  import markersMixin from './markers-mixin';\r\n  const cyclomediaMixin = philaVueMapping.CyclomediaMixin;\r\n  const pictometryMixin = philaVueMapping.PictometryMixin;\r\n\r\n  // vue doesn't like it when you import this as Map (reserved-ish word)\r\n  const Map_ = philaVueMapping.Map_;\r\n  const AddressInput = philaVueMapping.AddressInput;\r\n  const AddressCandidateList = philaVueMapping.AddressCandidateList;\r\n  const CircleMarker = philaVueMapping.CircleMarker;\r\n  const Control = philaVueMapping.Control;\r\n  const EsriTiledMapLayer = philaVueMapping.EsriTiledMapLayer;\r\n  const PngMarker = philaVueMapping.PngMarker;\r\n  const BasemapToggleControl = philaVueMapping.BasemapToggleControl;\r\n  const BasemapSelectControl = philaVueMapping.BasemapSelectControl;\r\n  const FullScreenMapToggleTab = philaVueMapping.FullScreenMapToggleTab;\r\n  const LocationControl = philaVueMapping.LocationControl;\r\n  const CyclomediaButton = philaVueMapping.CyclomediaButton;\r\n  const PictometryButton = philaVueMapping.PictometryButton;\r\n  const CyclomediaRecordingCircle = philaVueMapping.CyclomediaRecordingCircle;\r\n  const CyclomediaRecordingsClient = philaVueMapping.CyclomediaRecordingsClient;\r\n  const SvgViewConeMarker = philaVueMapping.SvgViewConeMarker;\r\n  const MeasureControl = philaVueMapping.MeasureControl;\r\n  const ControlCorner = philaVueMapping.ControlCorner;\r\n  const PopUp = philaVueMapping.PopUp;\r\n  const PopUpContent = philaVueMapping.PopUpContent;\r\n  const Polygon_ = philaVueMapping.Polygon_;\r\n  const Polyline_ = philaVueMapping.Polyline_;\r\n  const ModalAbout = philaVueMapping.ModalAbout;\r\n\r\n  const EsriWebMap = philaVueMapping.WebMap;\r\n  const EsriWebMapLayer = philaVueMapping.WebMapLayer;\r\n  const VectorMarker = philaVueMapping.VectorMarker;\r\n\r\n  export default {\r\n    mixins: [\r\n      markersMixin,\r\n      cyclomediaMixin,\r\n      pictometryMixin,\r\n    ],\r\n    components: {\r\n      AddressInput,\r\n      AddressCandidateList,\r\n      Map_,\r\n      Control,\r\n      EsriWebMap,\r\n      EsriWebMapLayer,\r\n      EsriTiledMapLayer,\r\n      CircleMarker,\r\n      VectorMarker,\r\n      PngMarker,\r\n      BasemapToggleControl,\r\n      BasemapSelectControl,\r\n      FullScreenMapToggleTab,\r\n      LocationControl,\r\n      PictometryButton,\r\n      CyclomediaButton,\r\n      CyclomediaRecordingCircle,\r\n      SvgViewConeMarker,\r\n      MeasureControl,\r\n      ControlCorner,\r\n      PopUp,\r\n      PopUpContent,\r\n      Polygon_,\r\n      Polyline_,\r\n      ModalAbout\r\n    },\r\n    mounted() {\r\n      this.$controller.appDidLoad();\r\n    },\r\n    computed: {\r\n      mapCenter() {\r\n        return this.$store.state.map.center;\r\n      },\r\n      addressAutocompleteEnabled() {\r\n        // TODO tidy up the code\r\n        if (this.$config.addressAutocomplete.enabled === true) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      addressInputPosition() {\r\n        if (this.isMobileOrTablet) {\r\n          return 'topleft'\r\n        } else {\r\n          return 'topalmostleft'\r\n        }\r\n      },\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n      fullScreenMapEnabled() {\r\n        return this.$store.state.fullScreenMapEnabled;\r\n      },\r\n      windowWidth() {\r\n        return this.$store.state.windowWidth;\r\n      },\r\n      mapPanelContainerClass() {\r\n        if (this.fullScreenMapEnabled) {\r\n          return 'medium-24 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map'\r\n        } else if (this.windowWidth >= 950) {\r\n          return 'medium-16 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map';\r\n        } else {\r\n          return 'medium-14 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map';\r\n        }\r\n      },\r\n      cycloLatlng() {\r\n        if (this.$store.state.cyclomedia.orientation.xyz !== null) {\r\n          const xyz = this.$store.state.cyclomedia.orientation.xyz;\r\n          return [xyz[1], xyz[0]];\r\n        } else {\r\n          const center = this.$config.map.center;\r\n          return center;\r\n        }\r\n      },\r\n      cycloRotationAngle() {\r\n        return this.$store.state.cyclomedia.orientation.yaw * (180/3.14159265359);\r\n      },\r\n      cycloHFov() {\r\n        return this.$store.state.cyclomedia.orientation.hFov;\r\n      },\r\n      shouldShowCyclomediaButton() {\r\n        return this.$config.cyclomedia.enabled && !this.isMobileOrTablet;\r\n      },\r\n      shouldShowPictometryButton() {\r\n        return this.$config.pictometry.enabled && !this.isMobileOrTablet;\r\n      },\r\n      shouldShowPopup() {\r\n        if (this.intersectingFeatures.length > 0) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      selectedPopupLayer() {\r\n        return this.$store.state.map.selectedPopupLayer;\r\n      },\r\n      selectedPopupLayerGeometryType() {\r\n        if (this.selectedPopupLayer) {\r\n          return this.selectedPopupLayer.feature.geometry.type;\r\n        } else {\r\n          return null;\r\n      }\r\n      },\r\n      selectedPopupLayerCoordinates() {\r\n        if (this.selectedPopupLayerGeometryType === \"Point\" || this.selectedPopupLayerGeometryType === \"LineString\") {\r\n          return this.selectedPopupLayer.feature.geometry.coordinates;\r\n        } else if (this.selectedPopupLayerGeometryType === \"Polygon\") {\r\n          return this.selectedPopupLayer.feature.geometry.coordinates[0];\r\n        } else if (this.selectedPopupLayerGeometryType === \"MultiPolygon\") {\r\n          return this.selectedPopupLayer.feature.geometry.coordinates;\r\n        }\r\n      },\r\n      selectedPopupLayerCoordinatesFlipped() {\r\n        // console.log('coords:', this.flipCoordsArray(this.selectedPopupLayerCoordinates));\r\n        if (this.selectedPopupLayerGeometryType === \"Point\") {\r\n          return this.flipCoords(this.selectedPopupLayerCoordinates);\r\n        } else if (this.selectedPopupLayerGeometryType !== \"MultiPolygon\") {\r\n          // console.log('calling FlipCoordsArray on:', this.selectedPopupLayerCoordinates);\r\n          return this.flipCoordsArray(this.selectedPopupLayerCoordinates);\r\n        } else {\r\n          return this.flipCoordsMultiPolygon(this.selectedPopupLayerCoordinates);\r\n        }\r\n      },\r\n      intersectingFeatures() {\r\n        return this.$store.state.map.intersectingFeatures;\r\n      },\r\n      geolocationEnabled() {\r\n        return this.$config.geolocation.enabled;\r\n      },\r\n      scale() {\r\n        return this.$store.state.map.scale;\r\n      },\r\n      webMapActiveLayers() {\r\n        return this.$store.state.map.webMapActiveLayers;\r\n      },\r\n      activeBasemap() {\r\n        const shouldShowImagery = this.$store.state.map.shouldShowImagery;\r\n        if (shouldShowImagery) {\r\n          return this.$store.state.map.imagery;\r\n        }\r\n        const defaultBasemap = this.$config.map.defaultBasemap;\r\n        const basemap = this.$store.state.map.basemap || defaultBasemap;\r\n        return basemap;\r\n      },\r\n      activeTiles() {\r\n        if (this.$config.map.basemaps[this.activeBasemap]) {\r\n          return this.$config.map.basemaps[this.activeBasemap].tiledLayers;\r\n        } else {\r\n          return [];\r\n        }\r\n      },\r\n      basemaps() {\r\n        return Object.values(this.$config.map.basemaps);\r\n      },\r\n      shouldShowImageryToggle() {\r\n        return this.hasImageryBasemaps && this.$config.map.imagery.enabled;\r\n      },\r\n      imageryBasemaps() {\r\n        return this.basemaps.filter(basemap => basemap.type === 'imagery');\r\n      },\r\n      hasImageryBasemaps() {\r\n        return this.imageryBasemaps.length > 0;\r\n      },\r\n      imageryYears() {\r\n        // pluck year from basemap objects\r\n        return this.imageryBasemaps.map(x => x.year);\r\n      },\r\n      historicBasemaps() {\r\n        return this.basemaps.filter(basemap => basemap.type === 'historic');\r\n      },\r\n      hasHistoricBasemaps() {\r\n        return this.historicBasemaps.length > 0;\r\n      },\r\n      historicYears() {\r\n        return this.historicBasemaps.map(x => x.year);\r\n      },\r\n      geocodeResult() {\r\n        return this.$store.state.geocode.data;\r\n      },\r\n      geocodeGeom() {\r\n        return (this.geocodeResult || {}).geometry;;\r\n      },\r\n      picOrCycloActive() {\r\n        if (this.cyclomediaActive || this.pictometryActive) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n    },\r\n    created() {\r\n      // if there's a default address, navigate to it\r\n      const defaultAddress = this.$config.defaultAddress;\r\n      if (defaultAddress) {\r\n        this.$controller.goToDefaultAddress(defaultAddress);\r\n      }\r\n\r\n      const cyclomediaConfig = this.$config.cyclomedia || {};\r\n      if (cyclomediaConfig.enabled) {\r\n      // create cyclomedia recordings client\r\n        this.$cyclomediaRecordingsClient = new CyclomediaRecordingsClient(\r\n          this.$config.cyclomedia.recordingsUrl,\r\n          this.$config.cyclomedia.username,\r\n          this.$config.cyclomedia.password,\r\n          4326\r\n        );\r\n      }\r\n    },\r\n    watch: {\r\n      picOrCycloActive(value) {\r\n        this.$nextTick(() => {\r\n          this.$store.state.map.map.invalidateSize();\r\n        })\r\n      }\r\n    },\r\n    methods: {\r\n      flipCoords(coords) {\r\n        // console.log('flipCoords is running on:', coords);\r\n        return [coords[1], coords[0]];\r\n      },\r\n      flipCoordsArray(anArray) {\r\n        // console.log('flipCoordsArray is running on:', anArray);\r\n        let newArray = []\r\n        for (let i in anArray) {\r\n          newArray[i] = [anArray[i][1], anArray[i][0]]\r\n        }\r\n        return newArray\r\n      },\r\n      flipCoordsMultiPolygon(aMultiPolygon) {\r\n        // console.log('flipCoordsMultiPolygon is running on:', aMultiPolygon);\r\n        let newArrayArray = []\r\n        for (let i in aMultiPolygon) {\r\n          // console.log('aMultiPolygon[i]', aMultiPolygon[i]);\r\n          let newArray = []\r\n          for (let j in aMultiPolygon[i][0]) {\r\n            // console.log('aMultiPolygon[i][0][j]', aMultiPolygon[i][0][j]);\r\n            newArray[j] = [aMultiPolygon[i][0][j][1], aMultiPolygon[i][0][j][0]]\r\n          }\r\n        newArrayArray[i] = newArray\r\n        }\r\n        return newArrayArray\r\n      },\r\n      shouldShowFeatureLayer(layer) {\r\n        if (layer.rest.layerDefinition) {\r\n          if (layer.rest.layerDefinition.minScale) {\r\n            // console.log('minZoom for', layer.title, 'is', layer.rest.layerDefinition.minScale, typeof layer.rest.layerDefinition.minScale, 'and current scale is', this.scale, typeof this.scale);\r\n            if (this.scale <= layer.rest.layerDefinition.minScale && this.webMapActiveLayers.includes(layer.title)) {\r\n              // console.log('checkLayer used layerDefinition and is returning true for', layer.title);\r\n              return true;\r\n            }\r\n          } else if (layer.rest.layerDefinition.drawingInfo && this.webMapActiveLayers.includes(layer.title)) {\r\n            return true;\r\n          }\r\n        } else if (this.webMapActiveLayers.includes(layer.title)) {\r\n          // console.log('checkLayer is returning true for', layer.title);\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      handleMapClick() {\r\n        // console.log('handle map click, e:', e);\r\n        document.getElementById('pvm-search-control-input').blur()\r\n      },\r\n      handleButtonClick() {\r\n        // console.log('handle button click is running');\r\n        document.getElementById('pvm-search-control-input').blur()\r\n      },\r\n      handleMapMove(e) {\r\n        // console.log('handleMapMove is running');\r\n        const map = this.$store.state.map.map;\r\n\r\n        const pictometryConfig = this.$config.pictometry || {};\r\n\r\n        const center = map.getCenter();\r\n        const { lat, lng } = center;\r\n        const coords = [lng, lat];\r\n        const zoom = map.getZoom();\r\n        this.$store.commit('setMapZoom', zoom);\r\n        const scale = this.$config.map.scales[zoom];\r\n        this.$store.commit('setMapScale', scale);\r\n\r\n        if (pictometryConfig.enabled) {\r\n          // update state for pictometry\r\n          this.$store.commit('setPictometryMapCenter', coords);\r\n\r\n          const zoom = map.getZoom();\r\n          this.$store.commit('setPictometryMapZoom', zoom);\r\n        }\r\n\r\n        const cyclomediaConfig = this.$config.cyclomedia || {};\r\n\r\n        if (cyclomediaConfig.enabled) {\r\n          // update cyclo recordings\r\n          this.updateCyclomediaRecordings();\r\n          this.$store.commit('setCyclomediaLatLngFromMap', [lat, lng]);\r\n        }\r\n      },\r\n\r\n    }, // end of methods\r\n  }; //end of export\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  /* .map-panel-container {\r\n    height: calc(100vh - 220px);\r\n  }\r\n\r\n  @media screen and (max-width: 40em) {\r\n    .map-panel-container {\r\n      height: calc(100vh - 256px);\r\n    }\r\n  } */\r\n\r\n/*this allows the loading mask to fill the div*/\r\n  .mb-panel-map {\r\n    position: relative;\r\n  }\r\n\r\n  .mb-map-with-widget {\r\n    height: 50%;\r\n  }\r\n\r\n  /* @media (max-width: 1024px) {\r\n    .mb-panel-map {\r\n      height: 600px;\r\n    }\r\n  } */\r\n\r\n  .mb-search-control-container {\r\n    height: 48px;\r\n    border-radius: 2px;\r\n    box-shadow:0 2px 4px rgba(0,0,0,0.2),0 -1px 0px rgba(0,0,0,0.02);\r\n  }\r\n\r\n  .mb-search-control-button {\r\n    color: #fff;\r\n    width: 50px;\r\n    background: #2176d2;\r\n    line-height: 48px;\r\n  }\r\n\r\n  .mb-search-control-input {\r\n    /* background-color: white; */\r\n    border: 0;\r\n    /* height: 48px !important; */\r\n    /* line-height: 48px; */\r\n    padding: 15px;\r\n    /* padding-left: 15px; */\r\n    /* padding-right: 15px; */\r\n    font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n    font-size: 16px;\r\n    width: 275px;\r\n  }\r\n\r\n  /* .mb-map-with-widget {\r\n    height: 50%;\r\n  } */\r\n\r\n  .widget-slot {\r\n    display: inline-block;\r\n    float: left;\r\n  }\r\n\r\n  .mb-map-loading-mask {\r\n    /*display: inline;*/\r\n    position: absolute;\r\n    top: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    background: rgba(0, 0 ,0 , 0.25);\r\n    z-index: 1000;\r\n    text-align: center;\r\n    vertical-align: middle;\r\n  }\r\n\r\n  .mb-map-loading-mask-inner {\r\n    position: absolute;\r\n    top: 40%;\r\n    left: 40%;\r\n  }\r\n\r\n  @media screen and (max-width: 1023px) {\r\n    .mb-search-control-input {\r\n      width: 250px;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 900px) {\r\n    .mb-search-control-input {\r\n      width: 200px;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 800px) {\r\n    .mb-search-control-input {\r\n      width: 150px;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 750px) {\r\n    .mb-search-control-input {\r\n      width: 250px;\r\n    }\r\n  }\r\n\r\n  /* @media screen and (max-width: 639px) {\r\n    .mb-search-control-input {\r\n      width: 250px;\r\n    }\r\n  } */\r\n\r\n  @media screen and (max-width: 450px) {\r\n    .mb-search-control-input {\r\n      width: 200px;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 400px) {\r\n    .mb-search-control-input {\r\n      width: 150px;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 350px) {\r\n    .mb-search-control-input {\r\n      width: 100px;\r\n    }\r\n  }\r\n</style>\r\n","<template>\r\n  <div class=\"cell medium-auto grid-x\" id=\"mb-root\">\r\n    <button class=\"small-24 button datasets-button\"\r\n            @click=\"toggleTopics\"\r\n    >\r\n      {{ this.buttonMessage }}\r\n    </button>\r\n\r\n      <topic-panel v-show=\"shouldShowTopics\" />\r\n      <map-panel v-show=\"shouldShowMap\">\r\n        <cyclomedia-widget v-if=\"this.shouldLoadCyclomediaWidget\"\r\n                           slot=\"cycloWidget\"\r\n                           v-show=\"cyclomediaActive\"\r\n                           screen-percent=\"3\"\r\n        />\r\n        <pictometry-widget v-if=\"this.shouldLoadPictometryWidget\"\r\n                           slot=\"pictWidget\"\r\n                           v-show=\"pictometryActive\"\r\n                           :apiKey=\"this.ak\"\r\n                           :secretKey=\"this.sk\"\r\n        >\r\n          <png-marker v-if=\"this.pictometryShowAddressMarker\"\r\n                      :latlng=\"[this.geocodeData.geometry.coordinates[1], this.geocodeData.geometry.coordinates[0]]\"\r\n                      :icon=\"'markers.png'\"\r\n                      :height=\"60\"\r\n                      :width=\"40\"\r\n                      :offsetX=\"0\"\r\n                      :offsetY=\"0\"\r\n          />\r\n          <layer v-if=\"this.pictometryActive\" />\r\n          <png-marker v-if=\"this.cyclomediaActive && this.pictometryActive\"\r\n                      :latlng=\"cycloLatlng\"\r\n                      :icon=\"'camera2.png'\"\r\n                      :height=\"20\"\r\n                      :width=\"30\"\r\n                      :offsetX=\"-2\"\r\n                      :offsetY=\"-2\"\r\n          />\r\n          <view-cone v-if=\"this.cyclomediaActive && this.pictometryActive\"\r\n                     :latlng=\"cycloLatlng\"\r\n                     :rotationAngle=\"cycloRotationAngle\"\r\n                     :hFov=\"cycloHFov\"\r\n          />\r\n        </pictometry-widget>\r\n      </map-panel>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import * as philaVueMapping from '@cityofphiladelphia/phila-vue-mapping';\r\n  const CyclomediaWidget = philaVueMapping.CyclomediaWidget;\r\n  const PictometryWidget = philaVueMapping.PictometryWidget;\r\n  const Layer = philaVueMapping.PictometryLayer;\r\n  const ViewCone = philaVueMapping.PictometryViewCone;\r\n  const PngMarker = philaVueMapping.PictometryPngMarker;\r\n\r\n  import axios from 'axios';\r\n  import TopicPanel from './TopicPanel.vue';\r\n  import MapPanel from './MapPanel.vue';\r\n\r\n  export default {\r\n    components: {\r\n      TopicPanel,\r\n      MapPanel,\r\n      CyclomediaWidget,\r\n      PictometryWidget,\r\n      Layer,\r\n      ViewCone,\r\n      PngMarker\r\n    },\r\n    mounted() {\r\n      // console.log('cyclo', this.$config.cyclomedia.enabled, CyclomediaWidget);\r\n      window.addEventListener('resize', this.handleWindowResize);\r\n      this.handleWindowResize();\r\n\r\n      const store = this.$store;\r\n      const knackUrl = \"https://api.knackhq.com/v1/objects/object_4/records/export?type=json\";\r\n      const params = {\r\n        // dataType: 'json'\r\n      }\r\n      const headers = {\r\n        'X-Knack-Application-Id': '550c60d00711ffe12e9efc64',\r\n        'X-Knack-REST-API-Key': '7bce4520-28dc-11e5-9f0a-4d758115b820'\r\n      }\r\n      axios.get(knackUrl, { params, headers }).then(response => {\r\n        const dataOut = response.data;\r\n        const records = dataOut.records;\r\n        const recordsFiltered = records.filter(record => record.field_12 === \"API\" || record.field_12 === \"GeoService\");\r\n\r\n        let bennyEndpoints = {};\r\n\r\n        for (let record of recordsFiltered) {\r\n          const url = record.field_25.split('\"')[1];\r\n          let url2;\r\n          if (url) {\r\n            url2 = url.split('query')[0].replace('https://', '').replace('http://', '').replace(/\\/$/, \"\").toLowerCase();\r\n          } else {\r\n            url2 = null;\r\n          }\r\n          if (record.field_13_raw.length > 0) {\r\n              bennyEndpoints[url2] = record.field_13_raw[0].id;\r\n          } else {\r\n              bennyEndpoints[url2] = '';\r\n          }\r\n        }\r\n        store.commit('setBennyEndpoints', bennyEndpoints);\r\n      }, response => {\r\n        console.log('AXIOS ERROR Layerboard.vue');\r\n      });\r\n    },\r\n    computed: {\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n      shouldLoadCyclomediaWidget() {\r\n        return this.$config.cyclomedia.enabled && !this.isMobileOrTablet;\r\n      },\r\n      shouldLoadPictometryWidget() {\r\n        return this.$config.pictometry.enabled && !this.isMobileOrTablet;\r\n      },\r\n      fullScreenMapEnabled() {\r\n        return this.$store.state.fullScreenMapEnabled;\r\n      },\r\n      cyclomediaActive() {\r\n        return this.$store.state.cyclomedia.active\r\n      },\r\n      cycloLatlng() {\r\n        if (this.$store.state.cyclomedia.orientation.xyz !== null) {\r\n          const xyz = this.$store.state.cyclomedia.orientation.xyz;\r\n          return [xyz[1], xyz[0]];\r\n        } else {\r\n          const center = this.$config.map.center;\r\n          return center;\r\n        }\r\n      },\r\n      cycloRotationAngle() {\r\n        return this.$store.state.cyclomedia.orientation.yaw * (180/3.14159265359);\r\n      },\r\n      cycloHFov() {\r\n        return this.$store.state.cyclomedia.orientation.hFov;\r\n      },\r\n      pictometryActive() {\r\n        return this.$store.state.pictometry.active\r\n      },\r\n      pictometryZoom() {\r\n        return this.$store.state.pictometry.zoom\r\n      },\r\n      pictometryShowAddressMarker() {\r\n        if (!this.pictometryActive || !this.geocodeData) {\r\n          return false;\r\n        } else if (this.pictometryZoom < 20 && this.cyclomediaActive) {\r\n          return false;\r\n        } else {\r\n          return true;\r\n        }\r\n      },\r\n      geocodeData() {\r\n        return this.$store.state.geocode.data\r\n      },\r\n      ak() {\r\n        const host = window.location.hostname;\r\n        if (host === 'atlas.phila.gov') {\r\n          return this.$config.pictometry.apiKey;\r\n        }\r\n        if (host === 'atlas-dev.phila.gov') {\r\n          return this.$config.pictometryDev.apiKey;\r\n        }\r\n        if (host === 'cityatlas.phila.gov') {\r\n          return this.$config.pictometryCity.apiKey;\r\n        }\r\n        if (host === 'cityatlas-dev.phila.gov') {\r\n          return this.$config.pictometryCityDev.apiKey;\r\n        }\r\n        if (host === '10.8.101.67') {\r\n          return this.$config.pictometryLocal.apiKey;\r\n        }\r\n      },\r\n      sk() {\r\n        const host = window.location.hostname;\r\n        if (host === 'atlas.phila.gov') {\r\n          return this.$config.pictometry.secretKey;\r\n        }\r\n        if (host === 'atlas-dev.phila.gov') {\r\n          return this.$config.pictometryDev.secretKey;\r\n        }\r\n        if (host === 'cityatlas.phila.gov') {\r\n          return this.$config.pictometryCity.secretKey;\r\n        }\r\n        if (host === 'cityatlas-dev.phila.gov') {\r\n          return this.$config.pictometryCityDev.secretKey;\r\n        }\r\n        if (host === '10.8.101.67') {\r\n          return this.$config.pictometryLocal.secretKey;\r\n        }\r\n      },\r\n      geocodeData() {\r\n        return this.$store.state.geocode.data\r\n      },\r\n      windowWidth() {\r\n        return this.$store.state.windowWidth;\r\n      },\r\n      windowHeight() {\r\n        return this.$store.state.windowSize.height;\r\n      },\r\n      didToggleTopicsOn() {\r\n        return this.$store.state.didToggleTopicsOn;\r\n      },\r\n      buttonMessage() {\r\n        if (this.didToggleTopicsOn) {\r\n          return 'See Map';\r\n        } else {\r\n          return 'See Datasets';\r\n        }\r\n      },\r\n      shouldShowTopics() {\r\n        return this.$store.state.shouldShowTopics;\r\n      },\r\n      shouldShowMap() {\r\n        return this.$store.state.shouldShowMap;\r\n      }\r\n    },\r\n    watch: {\r\n      pictometryShowAddressMarker(nextValue) {\r\n        // console.log('watch pictometryShowAddressMarker', nextValue);\r\n      },\r\n      windowWidth(nextWidth) {\r\n        this.calculateShouldShowTopics();\r\n        this.calculateShouldShowMap();\r\n      },\r\n      fullScreenMapEnabled(nextValue) {\r\n        this.calculateShouldShowTopics();\r\n        this.calculateShouldShowMap();\r\n      },\r\n      didToggleTopicsOn(nextValue) {\r\n        this.calculateShouldShowTopics();\r\n        this.calculateShouldShowMap();\r\n      },\r\n      shouldShowTopics(nextValue) {\r\n        this.handleWindowResize();\r\n      },\r\n      shouldShowMap(nextValue) {\r\n        this.handleWindowResize();\r\n      }\r\n    },\r\n    methods: {\r\n      // for mobile only\r\n      toggleTopics() {\r\n        const prevVal = this.$store.state.didToggleTopicsOn;\r\n        this.$store.commit('setDidToggleTopicsOn', !prevVal);\r\n      },\r\n      calculateShouldShowTopics() {\r\n        const windowWidth = this.windowWidth;\r\n        const smallScreen = windowWidth < 750;\r\n        const didToggleTopicsOn = this.$store.state.didToggleTopicsOn;\r\n        const fullScreenMapEnabled = this.$store.state.fullScreenMapEnabled;\r\n        // console.log('calculateShouldShowTopics, smallScreen:', smallScreen, 'didToggleTopicsOn', didToggleTopicsOn, 'fullScreenMapEnabled', fullScreenMapEnabled);\r\n        const shouldShowTopics = !smallScreen && !fullScreenMapEnabled || smallScreen && didToggleTopicsOn;\r\n        this.$store.commit('setShouldShowTopics', shouldShowTopics);\r\n      },\r\n      calculateShouldShowMap() {\r\n        const windowWidth = this.windowWidth;\r\n        const notMobile = windowWidth > 750;\r\n        const didToggleTopicsOn = this.$store.state.didToggleTopicsOn;\r\n        const shouldShowMap = notMobile || !didToggleTopicsOn;\r\n        this.$store.commit('setShouldShowMap', shouldShowMap);\r\n      },\r\n      handleWindowResize() {\r\n        const rootElement = document.getElementById('mb-root');\r\n        const rootStyle = window.getComputedStyle(rootElement);\r\n        // const rootHeight = rootStyle.getPropertyValue('height');\r\n        // const rootHeightNum = parseInt(rootHeight.replace('px', ''));\r\n        const rootHeightNum = 100;\r\n        const rootWidth = rootStyle.getPropertyValue('width');\r\n        const rootWidthNum = parseInt(rootWidth.replace('px', ''));\r\n        // let boardHeight;\r\n        const windowWidth = rootWidthNum;\r\n        const notMobile = windowWidth >= 640;\r\n        // console.log('handleWindowResize is running, windowWidth:', windowWidth, 'notMobile:', notMobile, 'this.$store.state.shouldShowTopics:', this.$store.state.shouldShowTopics);\r\n        // if (!notMobile) {\r\n        //   boardHeight = rootHeightNum - 34;\r\n        //   console.log('subtracting 34, rootHeightNum:', rootHeightNum, 'boardHeight:', boardHeight);\r\n        // } else {\r\n        //   boardHeight = rootHeightNum\r\n        //   // console.log('NOT subtracting 34, rootHeightNum:', rootHeightNum, 'boardHeight:', boardHeight);\r\n        // }\r\n        // this.styleObject.height = boardHeight.toString() + 'px';\r\n\r\n        // const obj = {\r\n        //   height: rootHeightNum,\r\n        //   width: rootWidthNum\r\n        // }\r\n        this.$store.commit('setWindowWidth', rootWidthNum);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n  /*don't highlight any form elements*/\r\n  input:focus,\r\n  select:focus,\r\n  textarea:focus,\r\n  button:focus {\r\n    outline: none;\r\n  }\r\n\r\n  /* standards applies padding to buttons, which causes some weirdness with\r\n  buttons on the map panel. override here. */\r\n  button {\r\n    padding: inherit;\r\n  }\r\n\r\n  .mb-root {\r\n    position: absolute;\r\n    bottom: 0;\r\n    top: 78px;\r\n    left: 0;\r\n    right: 0;\r\n    overflow: auto;\r\n  }\r\n\r\n  .datasets-button {\r\n    display: none;\r\n    margin: 0;\r\n  }\r\n\r\n  .mb-panel {\r\n    height: 100%;\r\n  }\r\n\r\n  /*.mb-panel-topics-with-widget {\r\n    height: 50%;\r\n  }*/\r\n\r\n  /*small devices only*/\r\n  /* @media screen and (max-width: 39.9375em) { */\r\n  @media screen and (max-width: 750px) {\r\n    .datasets-button {\r\n      display: block;\r\n    }\r\n  }\r\n\r\n  /* Medium and up */\r\n  /* @media screen and (min-width: 40em) {\r\n\r\n  } */\r\n\r\n  /* Medium only */\r\n  /* @media screen and (min-width: 40em) and (max-width: 63.9375em) {\r\n\r\n  } */\r\n\r\n  /* Large and up */\r\n  /* @media screen and (min-width: 64em) {\r\n\r\n  } */\r\n\r\n  /* Large only */\r\n  /* @media screen and (min-width: 64em) and (max-width: 74.9375em) {\r\n\r\n  } */\r\n\r\n</style>\r\n","// http://stackoverflow.com/a/37164538/676001\r\n\r\n// helper to verify that an item is an object\r\nexport function isObject(item) {\r\n  return (item && typeof item === 'object' && !Array.isArray(item) && item !== null);\r\n};\r\n\r\n// merges n objects, deeply, immutably\r\nexport default function mergeDeep(target, source) {\r\n  let output = Object.assign({}, target);\r\n  if (isObject(target) && isObject(source)) {\r\n    Object.keys(source).forEach(key => {\r\n      if (isObject(source[key])) {\r\n        if (!(key in target))\r\n          Object.assign(output, { [key]: source[key] });\r\n        else\r\n          output[key] = mergeDeep(target[key], source[key]);\r\n      } else {\r\n        Object.assign(output, { [key]: source[key] });\r\n      }\r\n    });\r\n  }\r\n  return output;\r\n};\r\n","import axios from 'axios';\r\nimport Vue from 'vue';\r\nimport createStore from './store';\r\nimport configMixin from './util/config-mixin';\r\nimport Layerboard from './components/Layerboard.vue';\r\nimport mergeDeep from './util/merge-deep';\r\n\r\nimport philaVueDatafetch from '@cityofphiladelphia/phila-vue-datafetch';\r\nconst controllerMixin = philaVueDatafetch;\r\n\r\nfunction initOpenMaps(clientConfig) {\r\n  const baseConfigUrl = clientConfig.baseConfig;\r\n\r\n  // get base config\r\n  return axios.get(baseConfigUrl).then(response => {\r\n    const data = response.data;\r\n    const baseConfigFn = eval(data);\r\n    const { gatekeeperKey } = clientConfig;\r\n    const baseConfig = baseConfigFn({ gatekeeperKey });\r\n\r\n    // deep merge base config and client config\r\n    const config = mergeDeep(baseConfig, clientConfig);\r\n\r\n    // make config accessible from each component via this.$config\r\n    Vue.use(configMixin, config);\r\n\r\n    // create store\r\n    const store = createStore(config);\r\n\r\n    // mix in controller\r\n    Vue.use(controllerMixin, { config, store });\r\n\r\n    // mount main vue\r\n    const vm = new Vue({\r\n      el: config.el || '#layerboard',\r\n      render: (h) => h(Layerboard),\r\n      store\r\n    });\r\n\r\n  }, response => {\r\n    console.error('AXIOS ERROR loading base config');\r\n  });\r\n}\r\n\r\nexport default initOpenMaps;\r\n\r\nexport { Layerboard };\r\n"],"names":["const","Vue","philaVueComps.Checkbox","let","this","philaVueMapping.CyclomediaMixin","philaVueMapping.PictometryMixin","philaVueMapping.Map_","philaVueMapping.AddressInput","philaVueMapping.AddressCandidateList","philaVueMapping.CircleMarker","philaVueMapping.Control","philaVueMapping.EsriTiledMapLayer","philaVueMapping.PngMarker","philaVueMapping.BasemapToggleControl","philaVueMapping.BasemapSelectControl","philaVueMapping.FullScreenMapToggleTab","philaVueMapping.LocationControl","philaVueMapping.CyclomediaButton","philaVueMapping.PictometryButton","philaVueMapping.CyclomediaRecordingCircle","philaVueMapping.CyclomediaRecordingsClient","philaVueMapping.SvgViewConeMarker","philaVueMapping.MeasureControl","philaVueMapping.ControlCorner","philaVueMapping.PopUp","philaVueMapping.PopUpContent","philaVueMapping.Polygon_","philaVueMapping.Polyline_","philaVueMapping.ModalAbout","philaVueMapping.WebMap","philaVueMapping.WebMapLayer","philaVueMapping.VectorMarker","zoom","philaVueMapping.CyclomediaWidget","philaVueMapping.PictometryWidget","philaVueMapping.PictometryLayer","philaVueMapping.PictometryViewCone","PngMarker","philaVueMapping.PictometryPngMarker"],"mappings":"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"}