{"version":3,"file":"layerboard.js","sources":["../src/util/is-mobile-device.js","../src/util/merge-deep.js","../src/store.js","../src/util/config-mixin.js","../src/components/TopicPanel.vue","../src/components/markers-mixin.js","../src/components/MapPanel.vue","../src/components/Layerboard.vue","../node_modules/@fortawesome/pro-solid-svg-icons/faInfoCircle.js","../node_modules/@fortawesome/pro-solid-svg-icons/faCheckSquare.js","../node_modules/@fortawesome/pro-solid-svg-icons/faFilter.js","../node_modules/@fortawesome/pro-light-svg-icons/faSquare.js","../src/main.js"],"sourcesContent":["export default function () {\r\n  const mobileOrTabletRegexA = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i;\r\n  const mobileOrTabletRegexB = /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i;\r\n\r\n  // get the user agent and test against both regex patterns\r\n  const userAgent = (navigator.userAgent || navigator.vendor || window.opera || '');\r\n  const isMobileOrTablet = (mobileOrTabletRegexA.test(userAgent) ||\r\n                            mobileOrTabletRegexB.test(userAgent.substr(0,4)));\r\n\r\n  return isMobileOrTablet;\r\n};\r\n","// http://stackoverflow.com/a/37164538/676001\r\n\r\n// helper to verify that an item is an object\r\nexport function isObject(item) {\r\n  return (item && typeof item === 'object' && !Array.isArray(item) && item !== null);\r\n};\r\n\r\n// merges n objects, deeply, immutably\r\nexport default function mergeDeep(target, source) {\r\n  let output = Object.assign({}, target);\r\n  if (isObject(target) && isObject(source)) {\r\n    Object.keys(source).forEach(key => {\r\n      if (isObject(source[key])) {\r\n        if (!(key in target))\r\n          Object.assign(output, { [key]: source[key] });\r\n        else\r\n          output[key] = mergeDeep(target[key], source[key]);\r\n      } else {\r\n        Object.assign(output, { [key]: source[key] });\r\n      }\r\n    });\r\n  }\r\n  return output;\r\n};\r\n","import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport isMobileDevice from './util/is-mobile-device';\r\nimport mergeDeep from './util/merge-deep';\r\nimport { pvmStore } from '@cityofphiladelphia/phila-vue-mapping';\r\nimport { pvcStore } from '@cityofphiladelphia/phila-vue-comps';\r\nimport philaVueDatafetch from '@cityofphiladelphia/phila-vue-datafetch'\r\nconst pvdStore = philaVueDatafetch.pvdStore\r\n\r\n// when you load vuex from a script tag this seems to happen automatically\r\nVue.use(Vuex);\r\n\r\n// function createStore(config, bennyEndpoints, bennyRepresentation) {\r\nfunction createStore(config) { //}, bennyEndpoints, bennyRepresentation) {\r\n  // const modals = pvdStore.createModals(config);\r\n\r\n  const initialState = {\r\n    isMobileOrTablet: isMobileDevice(),\r\n    fullScreenMapEnabled: false,\r\n    bennyEndpoints: {},\r\n    layers: {\r\n      layerUrls: {},\r\n      inputLayerFilter: '',\r\n      inputTagsFilter: '',\r\n    },\r\n    map: {\r\n      scale: null,\r\n      webMap: null,\r\n      webMapUrlLayer: null,\r\n      webMapActiveLayers: [],\r\n      webMapDisplayedLayers: [],\r\n      webMapLayersAndRest: [],\r\n      intersectingFeatures: [],\r\n      popupCoords: null,\r\n      selectedPopupLayer: null,\r\n      categories: [],\r\n      selectedCategory: '',\r\n    },\r\n    candidates: [],\r\n    addressEntered: null,\r\n    didToggleTopicsOn: false,\r\n    shouldShowTopics: true,\r\n    shouldShowMap: true,\r\n    windowWidth: 0,\r\n    route: null,\r\n    modals: {\r\n      keys: config.modals,\r\n      open: '',\r\n    },\r\n  };\r\n\r\n  const lb = {\r\n    state: initialState,\r\n    getters: {},\r\n    mutations: {\r\n      setIsMobileOrTablet(state, payload) {\r\n        state.isMobileOrTablet = payload;\r\n      },\r\n      setFullScreenMapEnabled(state, payload) {\r\n        state.fullScreenMapEnabled = payload;\r\n      },\r\n      setCategories(state, payload) {\r\n        state.map.categories = payload;\r\n      },\r\n      setSelectedCategory(state, payload) {\r\n        state.map.selectedCategory = payload;\r\n      },\r\n      setSelectedPopupLayer(state, payload) {\r\n        state.map.selectedPopupLayer = payload;\r\n      },\r\n      setIntersectingFeatures(state, payload) {\r\n        state.map.intersectingFeatures = payload;\r\n      },\r\n      setPopupCoords(state, payload) {\r\n        state.map.popupCoords = payload;\r\n      },\r\n      setBennyEndpoints(state, payload) {\r\n        state.bennyEndpoints = payload;\r\n      },\r\n      setLocation(state, payload) {\r\n        state.map.location.lat = payload.lat;\r\n        state.map.location.lng = payload.lng;\r\n      },\r\n      setWatchPositionOn(state, payload) {\r\n        state.map.watchPositionOn = payload;\r\n      },\r\n      setLayerUrls(state, payload) {\r\n        state.layers.layerUrls = payload;\r\n      },\r\n      setInputLayerFilter(state, payload) {\r\n        state.layers.inputLayerFilter = payload;\r\n      },\r\n      setInputTagsFilter(state, payload) {\r\n        state.layers.inputTagsFilter = payload;\r\n      },\r\n      setMap(state, payload) {\r\n        state.map.map = payload.map;\r\n      },\r\n      setWebMap(state, payload) {\r\n        state.map.webMap = payload;\r\n      },\r\n      setWebMapUrlLayer(state, payload) {\r\n        state.map.webMapUrlLayer = payload;\r\n      },\r\n      setWebMapActiveLayers(state, payload) {\r\n        state.map.webMapActiveLayers = payload;\r\n      },\r\n      setWebMapDisplayedLayers(state, payload) {\r\n        state.map.webMapDisplayedLayers = payload;\r\n      },\r\n      setWebMapLayersAndRest(state, payload) {\r\n        state.map.webMapLayersAndRest = payload;\r\n      },\r\n      setWebMapLayersOpacity(state, payload) {\r\n        // console.log('SETWEBMAPLAYERSOPACITY IS RUNNING', payload);\r\n        // let opa = state.map.webMapLayersAndRest.filter(layer => layer.layerName === payload.layerName)[0].opacity\r\n        // console.log('OPACITY BEFORE', state.map.webMapLayersAndRest.filter(layer => layer.title === payload.layerName)[0].opacity);\r\n        state.map.webMapLayersAndRest.filter(layer => layer.title === payload.layerName)[0].opacity = payload.opa;\r\n        // console.log('OPACITY AFTER', state.map.webMapLayersAndRest.filter(layer => layer.title === payload.layerName)[0].opacity);\r\n        //   return currentLayer[0];\r\n        // console.log('SETWEBMAPLAYERSOPACITY FINISHED RUNNING');\r\n      },\r\n      setLegend(state, payload) {\r\n        state.map.webMapLayersAndRest.filter(layer => layer.title === payload.layerName)[0].legend = payload.legend;\r\n      },\r\n      setMapScale(state, payload) {\r\n        state.map.scale = payload\r\n      },\r\n      // setBasemap(state, payload) {\r\n      //   state.map.basemap = payload;\r\n      // },\r\n      setDidToggleTopicsOn(state, payload) {\r\n        state.didToggleTopicsOn = payload;\r\n      },\r\n      setShouldShowTopics(state, payload) {\r\n        state.shouldShowTopics = payload;\r\n      },\r\n      setShouldShowMap(state, payload) {\r\n        state.shouldShowMap = payload;\r\n      },\r\n      setWindowWidth(state, payload) {\r\n        state.windowWidth = payload;\r\n      },\r\n      setRoute(state, payload) {\r\n        state.route = payload;\r\n      },\r\n      setDidToggleModal(state, name) {\r\n        // console.log('setDidToggleModal, name:', name, 'open:', open);\r\n        // console.log('setDidToggleModal, name:', name);\r\n        // state.modals[name].open = open === null ? !state.modals[name].open : open\r\n        state.modals.open = name;\r\n      },\r\n      setCandidates(state, payload) {\r\n        state.candidates = payload;\r\n      },\r\n      setAddressEntered(state, payload) {\r\n        state.addressEntered = payload;\r\n      },\r\n    }\r\n  }\r\n\r\n  // let mergeStore = mergeDeep(lb, pvdStore.store);\r\n  let mergeStore = mergeDeep(pvcStore, pvdStore.store);\r\n  mergeStore = mergeDeep(mergeStore, pvmStore);\r\n  mergeStore = mergeDeep(mergeStore, lb);\r\n\r\n  // reset the map center and zoom based on the config\r\n  mergeStore.state.map.center = config.map.center;\r\n  mergeStore.state.map.zoom = config.map.zoom;\r\n  mergeStore.state.pictometry.map.center = config.map.center;\r\n  mergeStore.state.pictometry.map.zoom = config.map.zoom;\r\n\r\n  return new Vuex.Store({\r\n    state: mergeStore.state,\r\n    getters: mergeStore.getters,\r\n    mutations: mergeStore.mutations\r\n  });\r\n}\r\n\r\nexport default createStore;\r\n","// shout out to airyland\r\n// https://github.com/airyland/vue-config/blob/master/index.js\r\n\r\nexport default (Vue, config) => {\r\n  Vue.mixin({\r\n    created() {\r\n      this.$config = config;\r\n    }\r\n  });\r\n};\r\n","<template>\r\n  <div id=\"topic-panel-container\"\r\n       :class=\"this.topicPanelContainerClass\"\r\n  >\r\n  <!-- class=\"cell medium-8 small-order-2 medium-order-1\" -->\r\n      <div class=\"cell\">\r\n        <div class=\"forms-header\">\r\n\r\n          <!-- layer filter -->\r\n          <!-- <form @submit.prevent=\"handleLayerFilterFormX\"\r\n                @keydown=\"preventEnter\"\r\n                class=\"om-search-control-input\"\r\n          >\r\n            <div class=\"input-group text-filter\">\r\n              <span class=\"input-group-label input-font\">Filter By Text:</span>\r\n              <input\r\n                     type=\"text\"\r\n                     class=\"input-type\"\r\n                     @keyup=\"handleLayerFilterFormKeyup\"\r\n              />\r\n              <div class=\"input-group-button\"\r\n                   v-if=\"this.$store.state.layers.inputLayerFilter != ''\"\r\n              >\r\n\r\n                <button class=\"om-search-control-button\">\r\n                  <i class=\"fa fa-times fa-lg\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form> -->\r\n\r\n          <!-- tags filter -->\r\n          <form @submit.prevent=\"handleTagsFilterFormX\"\r\n                @keydown=\"preventEnter\"\r\n                class=\"om-search-control-input-tags\"\r\n          >\r\n            <div class=\"input-group text-filter\">\r\n              <span class=\"input-group-label input-font\">Filter:</span>\r\n              <input\r\n                     type=\"text\"\r\n                     class=\"input-type\"\r\n                     @keyup=\"handleTagsFilterFormKeyup\"\r\n              />\r\n              <!-- placeholder=\"Filter datasets\" -->\r\n              <div class=\"input-group-button\"\r\n                   v-if=\"this.$store.state.layers.inputTagsFilter != ''\"\r\n              >\r\n\r\n                <button class=\"om-search-control-button\">\r\n                  <i class=\"fa fa-times fa-lg\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n          <!-- categories filter -->\r\n          <!-- <div class=\"input-group\">\r\n            <span class=\"input-group-label input-font\">Filter By Category:</span>\r\n\r\n            <select @change=\"didSelectCategory\"\r\n                    class=\"input-select\"\r\n            >\r\n              <option v-for=\"category in this.categories\"\r\n                      value=\"category\"\r\n              >\r\n                {{ category }}\r\n              </option>\r\n            </select>\r\n          </div> -->\r\n        </div>\r\n      <!-- </div> -->\r\n\r\n        <div class=\"topics-container cell medium-cell-block-y\"\r\n             id=\"topics-container\"\r\n        >\r\n          <form action=\"#/\">\r\n            <fieldset class=\"options\">\r\n              <!-- <ul class=\"no-bullet\"> -->\r\n                <checkbox v-for=\"(currentWmLayer, index) in this.currentWmLayers\"\r\n                          :layer=\"currentWmLayer.layer\"\r\n                          :layerName=\"currentWmLayer.title\"\r\n                          :layerId=\"currentWmLayer.id\"\r\n                          :layerDefinition=\"currentWmLayer.rest.layerDefinition\"\r\n                          :opacity=\"currentWmLayer.opacity\"\r\n                          :legend=\"currentWmLayer.legend\"\r\n                          :key=\"currentWmLayer.id\"\r\n                >\r\n                <!-- :tags=\"currentWmLayer.tags\" -->\r\n                </checkbox>\r\n              <!-- </ul> -->\r\n            </fieldset>\r\n          </form>\r\n        </div>\r\n\r\n      </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // import * as philaVueComps from '@cityofphiladelphia/phila-vue-comps';\r\n  // const Checkbox = philaVueComps.Checkbox\r\n\r\n  import {\r\n    Checkbox\r\n  } from '@cityofphiladelphia/phila-vue-mapping';\r\n\r\n  export default {\r\n    components: {\r\n      Checkbox\r\n    },\r\n    computed: {\r\n      windowWidth() {\r\n        return this.$store.state.windowWidth;\r\n      },\r\n      fullScreenMapEnabled() {\r\n        return this.$store.state.fullScreenMapEnabled;\r\n      },\r\n      topicPanelContainerClass() {\r\n        if (this.fullScreenMapEnabled) {\r\n          return 'cell medium-1 small-order-2 medium-order-1'\r\n        } else if (this.windowWidth >= 950) {\r\n          return 'cell medium-8 small-order-1 small-24 medium-order-2';\r\n        } else {\r\n          return 'cell medium-10 small-order-1 small-24 medium-order-2';\r\n        }\r\n      },\r\n      categories() {\r\n        return this.$store.state.map.categories;\r\n      },\r\n      selectedCategory() {\r\n        return this.$store.state.map.selectedCategory;\r\n      },\r\n      scale() {\r\n        return this.$store.state.map.scale;\r\n      },\r\n      currentWmLayers() {\r\n        const layers = this.$store.state.map.webMapLayersAndRest;\r\n        let currentLayers = [];\r\n        for (let layer of layers) {\r\n          if (layer.tags) {\r\n            if (\r\n              layer.title.toLowerCase().includes(this.inputLayerFilter.toLowerCase()) && layer.tags.join().toLowerCase().includes(this.inputTagsFilter.toLowerCase()) && layer.category.includes(this.selectedCategory)\r\n              || this.$store.state.map.webMapActiveLayers.includes(layer.title)\r\n            ) {\r\n              // if (this.inputTagsFilter !== '') {\r\n              //   for (let layerTag of layer.tags) {\r\n              //     if (layerTag.toLowerCase().includes(this.inputTagsFilter.toLowerCase())) {\r\n              //       console.log('layerTag:', layerTag);\r\n              //     }\r\n              //   }\r\n              // }\r\n              currentLayers.push(layer)\r\n            }\r\n          } else if (this.inputTagsFilter !== '') {\r\n            continue;\r\n          } else {\r\n            if (\r\n              layer.title.toLowerCase().includes(this.inputLayerFilter.toLowerCase()) && layer.category.includes(this.selectedCategory)\r\n              || this.$store.state.map.webMapActiveLayers.includes(layer.title)\r\n            ) {\r\n              currentLayers.push(layer)\r\n            }\r\n          }\r\n        }\r\n        return currentLayers;\r\n      },\r\n      inputLayerFilter() {\r\n        return this.$store.state.layers.inputLayerFilter;\r\n      },\r\n      inputTagsFilter() {\r\n        return this.$store.state.layers.inputTagsFilter;\r\n      },\r\n      windowSize() {\r\n        return this.$store.state.windowSize;\r\n      },\r\n    },\r\n    methods: {\r\n      handleLayerFilterFormKeyup(e) {\r\n        const input = e.target.value;\r\n        this.$store.commit('setInputLayerFilter', input);\r\n      },\r\n      handleLayerFilterFormX(e) {\r\n        e.target[0].value = ''\r\n        this.$store.commit('setInputLayerFilter', '');\r\n      },\r\n      handleTagsFilterFormKeyup(e) {\r\n        const input = e.target.value;\r\n        // if (input.length >= 3) {\r\n        this.$store.commit('setInputTagsFilter', input);\r\n        // } else {\r\n          // this.$store.commit('setInputLayerFilter', null);\r\n        // }\r\n      },\r\n      handleTagsFilterFormX(e) {\r\n        e.target[0].value = ''\r\n        this.$store.commit('setInputTagsFilter', '');\r\n      },\r\n      didSelectCategory(e) {\r\n        const selected = e.target.selectedIndex;\r\n        this.$store.commit('setSelectedCategory', this.categories[selected]);\r\n      },\r\n      preventEnter(e) {\r\n        if(e.keyCode === 13) {\r\n          e.preventDefault();\r\n        }\r\n      },\r\n    },\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .forms-header {\r\n    padding: 5px;\r\n    /*this keeps the box shadow over the scrollable part of the panel*/\r\n    position: relative;\r\n    z-index: 1;\r\n    -webkit-box-shadow: 0px 5px 7px -2px rgba(0,0,0,0.18);\r\n    -moz-box-shadow: 0px 5px 7px -2px rgba(0,0,0,0.18);\r\n    box-shadow: 0px 5px 7px -2px rgba(0,0,0,0.18);\r\n  }\r\n\r\n  .input-type {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  .input-select {\r\n    margin-bottom: 0px;\r\n  }\r\n\r\n  .input-group {\r\n    height: 40px !important;\r\n    margin-top: 6px;\r\n    margin-bottom: 6px;\r\n  }\r\n\r\n  .input-group-label {\r\n    border-right: 1px;\r\n    border-style: solid;\r\n    padding-left: 8px;\r\n    padding-right: 8px;\r\n    padding-top: 0px;\r\n    padding-bottom: 0px;\r\n    height: 20px !important;\r\n  }\r\n\r\n  .topics-container {\r\n    padding: 20px;\r\n    overflow-y: scroll;\r\n  }\r\n\r\n  .topics-container {\r\n    /* height: calc(100vh - 220px); */\r\n    /* height: calc(100vh - 268px); */\r\n\r\n    /* height: calc(100vh - 218px); */\r\n    height: calc(100vh - 170px);\r\n  }\r\n\r\n  /* @media screen and (max-width: 40em) { */\r\n  @media screen and (max-width: 750px) {\r\n    .topics-container {\r\n      /* height: calc(100vh - 256px); */\r\n      height: calc(100vh - 300px);\r\n    }\r\n  }\r\n\r\n  .om-search-control-container {\r\n    border-radius: 2px;\r\n    box-shadow:0 2px 4px rgba(0,0,0,0.2),0 -1px 0px rgba(0,0,0,0.02);\r\n    margin-top: 10px;\r\n    margin-bottom: 10px;\r\n    width: inherit;\r\n  }\r\n\r\n  .om-search-control-button {\r\n    width: 40px;\r\n    background: #ccc;\r\n    float: right;\r\n  }\r\n\r\n  .om-search-control-input {\r\n    font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n    font-size: 16px;\r\n  }\r\n\r\n  .om-search-control-input-tags {\r\n    font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n    font-size: 16px;\r\n  }\r\n\r\n  .input-font {\r\n    font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n    font-size: 16px;\r\n  }\r\n\r\n</style>\r\n","export default {\r\n  computed: {\r\n    // returns map markers as simple object with a geometry property, key,\r\n    // and optional properties for symbology\r\n    markers() {\r\n      const markers = [];\r\n      // geocoded address marker\r\n      const geocodeGeom = this.geocodeGeom;\r\n      if (geocodeGeom) {\r\n        const latlng = [...geocodeGeom.coordinates].reverse();\r\n        const key = this.geocodeResult.properties.street_address;\r\n        const color = '#2176d2';\r\n        const markerType = 'geocode';\r\n        const icon = {\r\n          prefix: 'fas',\r\n          icon: 'map-marker-alt',\r\n          shadow: true,\r\n          size: 50,\r\n        }\r\n        const addressMarker = {latlng, key, color, markerType, icon};\r\n        markers.push(addressMarker);\r\n      }\r\n      return markers;\r\n    },\r\n    locationMarker() {\r\n      const latlngArray = [this.$store.state.map.location.lat, this.$store.state.map.location.lng]\r\n      const marker = {\r\n        latlng: latlngArray,\r\n        radius: 6,\r\n        fillColor: '#ff3f3f',\r\n        color: '#ff0000',\r\n        weight: 1,\r\n        opacity: 1,\r\n        fillOpacity: 1.0\r\n      }\r\n      return marker;\r\n    },\r\n  },\r\n};\r\n","<template>\r\n  <div id=\"map-panel-container\"\r\n       :class=\"this.mapPanelContainerClass\"\r\n  >\r\n    <full-screen-map-toggle-tab v-once />\r\n    <map_ :class=\"{ 'mb-map-with-widget': this.$store.state.cyclomedia.active || this.$store.state.pictometry.active }\"\r\n          id=\"map-tag\"\r\n          :center=\"this.mapCenter\"\r\n          :zoom=\"this.$store.state.map.zoom\"\r\n          @l-click=\"handleMapClick\"\r\n          @l-moveend=\"handleMapMove\"\r\n          zoom-control-position=\"bottomright\"\r\n          :min-zoom=\"this.$config.map.minZoom\"\r\n          :max-zoom=\"22\"\r\n    >\r\n\r\n    <!-- <polygon_ -->\r\n    <polygon_ v-if=\"this.selectedPopupLayerGeometryType === 'Polygon' || this.selectedPopupLayerGeometryType === 'MultiPolygon'\"\r\n              :color=\"'#00ffff'\"\r\n              :fill=\"false\"\r\n              :weight=\"5\"\r\n              :latlngs=\"this.selectedPopupLayerCoordinatesFlipped\"\r\n              :pane=\"'highlightOverlay'\"\r\n    />\r\n    <polyline_ v-if=\"this.selectedPopupLayerGeometryType === 'LineString'\"\r\n              :color=\"'#00ffff'\"\r\n              :weight=\"4\"\r\n              :latlngs=\"this.selectedPopupLayerCoordinatesFlipped\"\r\n              :pane=\"'highlightOverlay'\"\r\n    />\r\n    <circle-marker v-if=\"this.selectedPopupLayerGeometryType === 'Point'\"\r\n                   :latlng=\"this.selectedPopupLayerCoordinatesFlipped\"\r\n                   :radius=\"7\"\r\n                   :fillColor=\"'#00ffff'\"\r\n                   :color=\"'#00ffff'\"\r\n                   :weight=\"this.locationMarker.weight\"\r\n                   :opacity=\"this.locationMarker.opacity\"\r\n                   :fillOpacity=\"this.locationMarker.fillOpacity\"\r\n                   :pane=\"'highlightOverlay'\"\r\n    />\r\n\r\n      <!-- webmap -->\r\n      <esri-web-map>\r\n        <esri-web-map-layer v-for=\"(layer, key) in this.$store.state.map.webMapLayersAndRest\"\r\n                            v-if=\"shouldShowFeatureLayer(layer)\"\r\n                            :key=\"key\"\r\n                            :layer=\"layer.layer\"\r\n                            :layerName=\"layer.title\"\r\n                            :layerDefinition=\"layer.rest.layerDefinition\"\r\n                            :opacity=\"layer.opacity\"\r\n                            :type=\"layer.type2\"\r\n        />\r\n      </esri-web-map>\r\n      <pop-up v-if=\"this.shouldShowPopup\">\r\n        <pop-up-content />\r\n      </pop-up>\r\n\r\n\r\n      <!-- basemaps -->\r\n      <esri-tiled-map-layer v-for=\"(basemap, key) in this.$config.map.basemaps\"\r\n                         v-if=\"activeBasemap === key\"\r\n                         :key=\"key\"\r\n                         :name=\"key\"\r\n                         :url=\"basemap.url\"\r\n                         :max-zoom=\"basemap.maxZoom\"\r\n                         :zIndex=\"basemap.zIndex\"\r\n                         :attribution=\"basemap.attribution\"\r\n      />\r\n\r\n      <!-- basemap labels and parcels outlines -->\r\n      <esri-tiled-map-layer v-for=\"(tiledLayer, key) in this.$config.map.tiledLayers\"\r\n                         v-if=\"activeTiles.includes(key)\"\r\n                         :key=\"key\"\r\n                         :name=\"key\"\r\n                         :url=\"tiledLayer.url\"\r\n                         :zIndex=\"tiledLayer.zIndex\"\r\n                         :attribution=\"tiledLayer.attribution\"\r\n      />\r\n\r\n      <vector-marker v-for=\"(marker, index) in markers\"\r\n                    :latlng=\"marker.latlng\"\r\n                    :key=\"marker.key\"\r\n                    :markerColor=\"marker.color\"\r\n                    :icon=\"marker.icon\"\r\n      />\r\n\r\n      <!-- marker using a png and ablility to rotate it -->\r\n      <png-marker v-if=\"this.cyclomediaActive\"\r\n                  :icon=\"'images/camera.png'\"\r\n                  :latlng=\"cycloLatlng\"\r\n                  :rotationAngle=\"cycloRotationAngle\"\r\n      />\r\n\r\n      <!-- marker using custom code extending icons - https://github.com/iatkin/leaflet-svgicon -->\r\n      <svg-view-cone-marker v-if=\"this.cyclomediaActive\"\r\n                            :latlng=\"cycloLatlng\"\r\n                            :rotationAngle=\"cycloRotationAngle\"\r\n                            :hFov=\"cycloHFov\"\r\n      />\r\n\r\n      <control-corner :vSide=\"'top'\"\r\n                      :hSide=\"'almostright'\"\r\n      >\r\n      </control-corner>\r\n\r\n      <control-corner :vSide=\"'top'\"\r\n                      :hSide=\"'almostleft'\"\r\n      >\r\n      </control-corner>\r\n\r\n      <div v-once>\r\n        <basemap-toggle-control v-if=\"shouldShowImageryToggle\"\r\n                                v-once\r\n                                :position=\"'topright'\"\r\n        />\r\n      </div>\r\n\r\n      <div v-once>\r\n        <basemap-select-control\r\n                       :position=\"'topalmostright'\"\r\n        />\r\n      </div>\r\n\r\n      <div v-once>\r\n        <pictometry-button v-if=\"this.shouldShowPictometryButton\"\r\n                           v-once\r\n                           :position=\"'topright'\"\r\n                           :link=\"'pictometry'\"\r\n                           :imgSrc=\"'images/pictometry.png'\"\r\n        />\r\n      </div>\r\n\r\n      <div v-once>\r\n        <cyclomedia-button v-if=\"this.shouldShowCyclomediaButton\"\r\n                           v-once\r\n                           :position=\"'topright'\"\r\n                           :link=\"'cyclomedia'\"\r\n                           :imgSrc=\"'images/cyclomedia.png'\"\r\n                           @click=\"handleCyclomediaButtonClick\"\r\n        />\r\n      </div>\r\n\r\n      <div v-once\r\n           v-if=\"this.measureControlEnabled\"\r\n      >\r\n        <measure-control :position=\"'bottomleft'\" />\r\n      </div>\r\n\r\n      <div v-once>\r\n        <location-control v-once\r\n                          v-if=\"this.geolocationEnabled\"\r\n                          :position=\"'bottomright'\"\r\n                          @click=\"handleButtonClick\"\r\n        />\r\n      </div>\r\n\r\n      <!-- search control -->\r\n      <div v-once>\r\n        <map-address-input :position=\"this.addressInputPosition\"\r\n                           :placeholder=\"this.addressInputPlaceholder\"\r\n                           :widthFromConfig=\"this.addressInputWidth\"\r\n        >\r\n        </map-address-input>\r\n      </div>\r\n      <map-address-candidate-list v-if=\"this.addressAutocompleteEnabled\"\r\n                                 :position=\"this.addressInputPosition\"\r\n                                 :widthFromConfig=\"this.addressInputWidth\"\r\n      />\r\n\r\n      <!-- location marker -->\r\n      <circle-marker v-if=\"this.$store.state.map.location.lat != null\"\r\n                     :latlng=\"this.locationMarker.latlng\"\r\n                     :radius=\"this.locationMarker.radius\"\r\n                     :fillColor=\"this.locationMarker.fillColor\"\r\n                     :color=\"this.locationMarker.color\"\r\n                     :weight=\"this.locationMarker.weight\"\r\n                     :opacity=\"this.locationMarker.opacity\"\r\n                     :fillOpacity=\"this.locationMarker.fillOpacity\"\r\n                     :pane=\"'highlightOverlay'\"\r\n      />\r\n\r\n      <cyclomedia-recording-circle v-for=\"recording in cyclomediaRecordings\"\r\n                                   v-if=\"cyclomediaActive\"\r\n                                   :key=\"recording.imageId\"\r\n                                   :imageId=\"recording.imageId\"\r\n                                   :latlng=\"[recording.lat, recording.lng]\"\r\n                                   :size=\"1.2\"\r\n                                   :color=\"'#3388ff'\"\r\n                                   :weight=\"1\"\r\n                                   @l-click=\"handleCyclomediaRecordingClick\"\r\n      />\r\n    </map_>\r\n    <modal-about></modal-about>\r\n    <slot class='widget-slot' name=\"cycloWidget\" />\r\n    <slot class='widget-slot' name=\"pictWidget\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n\r\n  // import { geoJSON, featureGroup } from 'leaflet';\r\n  // import { marker as Lmarker } from 'leaflet';\r\n\r\n  // mixins\r\n  import markersMixin from './markers-mixin';\r\n  import {\r\n    cyclomediaMixin,\r\n    pictometryMixin,\r\n    Map_,\r\n    Control,\r\n    MapAddressInput,\r\n    MapAddressCandidateList,\r\n    EsriTiledMapLayer,\r\n    EsriTiledOverlay,\r\n    EsriDynamicMapLayer,\r\n    EsriFeatureLayer,\r\n    // Geojson,\r\n    CircleMarker,\r\n    // OpacitySlider,\r\n    VectorMarker,\r\n    PngMarker,\r\n    BasemapToggleControl,\r\n    BasemapSelectControl,\r\n    FullScreenMapToggleTab,\r\n    LocationControl,\r\n    CyclomediaButton,\r\n    PictometryButton,\r\n    CyclomediaRecordingCircle,\r\n    CyclomediaRecordingsClient,\r\n    SvgViewConeMarker,\r\n    MeasureControl,\r\n    LegendControl,\r\n    BasemapTooltip,\r\n    ControlCorner,\r\n    EsriWebMap,\r\n    EsriWebMapLayer,\r\n    PopUp,\r\n    PopUpContent,\r\n    Polygon_,\r\n    Polyline_,\r\n    ModalAbout\r\n  } from '@cityofphiladelphia/phila-vue-mapping';\r\n\r\n  export default {\r\n    name: 'MapPanel',\r\n    mixins: [\r\n      markersMixin,\r\n      cyclomediaMixin,\r\n      pictometryMixin,\r\n    ],\r\n    components: {\r\n      Map_,\r\n      Control,\r\n      MapAddressInput,\r\n      MapAddressCandidateList,\r\n      EsriWebMap,\r\n      EsriWebMapLayer,\r\n      EsriTiledMapLayer,\r\n      CircleMarker,\r\n      VectorMarker,\r\n      PngMarker,\r\n      BasemapToggleControl,\r\n      BasemapSelectControl,\r\n      FullScreenMapToggleTab,\r\n      LocationControl,\r\n      PictometryButton,\r\n      CyclomediaButton,\r\n      CyclomediaRecordingCircle,\r\n      SvgViewConeMarker,\r\n      MeasureControl,\r\n      ControlCorner,\r\n      PopUp,\r\n      PopUpContent,\r\n      Polygon_,\r\n      Polyline_,\r\n      ModalAbout\r\n    },\r\n    mounted() {\r\n      this.$controller.appDidLoad();\r\n    },\r\n    computed: {\r\n      mapCenter() {\r\n        return this.$store.state.map.center;\r\n      },\r\n      addressAutocompleteEnabled() {\r\n        // TODO tidy up the code\r\n        if (this.$config.addressInput) {\r\n          if (this.$config.addressInput.autocompleteEnabled === true) {\r\n            return true;\r\n          } else {\r\n            return false;\r\n          }\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      addressInputPosition() {\r\n        if (this.isMobileOrTablet) {\r\n          return 'topleft'\r\n        } else {\r\n          return 'topalmostleft'\r\n        }\r\n      },\r\n      addressInputWidth() {\r\n        if (this.$config.addressInput) {\r\n          return this.$config.addressInput.mapWidth;\r\n        } else {\r\n          return 415;\r\n        }\r\n      },\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n      fullScreenMapEnabled() {\r\n        return this.$store.state.fullScreenMapEnabled;\r\n      },\r\n      windowWidth() {\r\n        return this.$store.state.windowWidth;\r\n      },\r\n      mapPanelContainerClass() {\r\n        if (this.fullScreenMapEnabled) {\r\n          return 'medium-24 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map'\r\n        } else if (this.windowWidth >= 950) {\r\n          return 'medium-16 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map';\r\n        } else {\r\n          return 'medium-14 small-order-1 small-24 medium-order-2 mb-panel mb-panel-map';\r\n        }\r\n      },\r\n      cycloLatlng() {\r\n        if (this.$store.state.cyclomedia.orientation.xyz !== null) {\r\n          const xyz = this.$store.state.cyclomedia.orientation.xyz;\r\n          return [xyz[1], xyz[0]];\r\n        } else {\r\n          const center = this.$config.map.center;\r\n          return center;\r\n        }\r\n      },\r\n      cycloRotationAngle() {\r\n        return this.$store.state.cyclomedia.orientation.yaw * (180/3.14159265359);\r\n      },\r\n      cycloHFov() {\r\n        return this.$store.state.cyclomedia.orientation.hFov;\r\n      },\r\n      shouldShowCyclomediaButton() {\r\n        return this.$config.cyclomedia.enabled && !this.isMobileOrTablet;\r\n      },\r\n      shouldShowPictometryButton() {\r\n        return this.$config.pictometry.enabled && !this.isMobileOrTablet;\r\n      },\r\n      shouldShowPopup() {\r\n        if (this.intersectingFeatures.length > 0) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      selectedPopupLayer() {\r\n        return this.$store.state.map.selectedPopupLayer;\r\n      },\r\n      selectedPopupLayerGeometryType() {\r\n        if (this.selectedPopupLayer) {\r\n          return this.selectedPopupLayer.feature.geometry.type;\r\n        } else {\r\n          return null;\r\n      }\r\n      },\r\n      selectedPopupLayerCoordinates() {\r\n        if (this.selectedPopupLayerGeometryType === \"Point\" || this.selectedPopupLayerGeometryType === \"LineString\") {\r\n          return this.selectedPopupLayer.feature.geometry.coordinates;\r\n        } else if (this.selectedPopupLayerGeometryType === \"Polygon\") {\r\n          return this.selectedPopupLayer.feature.geometry.coordinates[0];\r\n        } else if (this.selectedPopupLayerGeometryType === \"MultiPolygon\") {\r\n          return this.selectedPopupLayer.feature.geometry.coordinates;\r\n        }\r\n      },\r\n      selectedPopupLayerCoordinatesFlipped() {\r\n        // console.log('coords:', this.flipCoordsArray(this.selectedPopupLayerCoordinates));\r\n        if (this.selectedPopupLayerGeometryType === \"Point\") {\r\n          return this.flipCoords(this.selectedPopupLayerCoordinates);\r\n        } else if (this.selectedPopupLayerGeometryType !== \"MultiPolygon\") {\r\n          // console.log('calling FlipCoordsArray on:', this.selectedPopupLayerCoordinates);\r\n          return this.flipCoordsArray(this.selectedPopupLayerCoordinates);\r\n        } else {\r\n          return this.flipCoordsMultiPolygon(this.selectedPopupLayerCoordinates);\r\n        }\r\n      },\r\n      intersectingFeatures() {\r\n        return this.$store.state.map.intersectingFeatures;\r\n      },\r\n      geolocationEnabled() {\r\n        return this.$config.geolocation.enabled;\r\n      },\r\n      scale() {\r\n        return this.$store.state.map.scale;\r\n      },\r\n      webMapActiveLayers() {\r\n        return this.$store.state.map.webMapActiveLayers;\r\n      },\r\n      activeBasemap() {\r\n        const shouldShowImagery = this.$store.state.map.shouldShowImagery;\r\n        if (shouldShowImagery) {\r\n          return this.$store.state.map.imagery;\r\n        }\r\n        const defaultBasemap = this.$config.map.defaultBasemap;\r\n        const basemap = this.$store.state.map.basemap || defaultBasemap;\r\n        return basemap;\r\n      },\r\n      activeTiles() {\r\n        if (this.$config.map.basemaps[this.activeBasemap]) {\r\n          return this.$config.map.basemaps[this.activeBasemap].tiledLayers;\r\n        } else {\r\n          return [];\r\n        }\r\n      },\r\n      basemaps() {\r\n        return Object.values(this.$config.map.basemaps);\r\n      },\r\n      shouldShowImageryToggle() {\r\n        return this.hasImageryBasemaps && this.$config.map.imagery.enabled;\r\n      },\r\n      imageryBasemaps() {\r\n        return this.basemaps.filter(basemap => basemap.type === 'imagery');\r\n      },\r\n      hasImageryBasemaps() {\r\n        return this.imageryBasemaps.length > 0;\r\n      },\r\n      imageryYears() {\r\n        // pluck year from basemap objects\r\n        return this.imageryBasemaps.map(x => x.year);\r\n      },\r\n      historicBasemaps() {\r\n        return this.basemaps.filter(basemap => basemap.type === 'historic');\r\n      },\r\n      hasHistoricBasemaps() {\r\n        return this.historicBasemaps.length > 0;\r\n      },\r\n      historicYears() {\r\n        return this.historicBasemaps.map(x => x.year);\r\n      },\r\n      geocodeResult() {\r\n        return this.$store.state.geocode.data;\r\n      },\r\n      geocodeGeom() {\r\n        return (this.geocodeResult || {}).geometry;;\r\n      },\r\n      picOrCycloActive() {\r\n        if (this.cyclomediaActive || this.pictometryActive) {\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      measureControlEnabled() {\r\n        if (this.$config.measureControlEnabled === false) {\r\n          return false;\r\n        } else {\r\n          return true;\r\n        }\r\n      },\r\n    },\r\n    created() {\r\n      // if there's a default address, navigate to it\r\n      const defaultAddress = this.$config.defaultAddress;\r\n      if (defaultAddress) {\r\n        this.$controller.goToDefaultAddress(defaultAddress);\r\n      }\r\n\r\n      const cyclomediaConfig = this.$config.cyclomedia || {};\r\n      if (cyclomediaConfig.enabled) {\r\n      // create cyclomedia recordings client\r\n        this.$cyclomediaRecordingsClient = new CyclomediaRecordingsClient(\r\n          this.$config.cyclomedia.recordingsUrl,\r\n          this.$config.cyclomedia.username,\r\n          this.$config.cyclomedia.password,\r\n          4326\r\n        );\r\n      }\r\n    },\r\n    watch: {\r\n      picOrCycloActive(value) {\r\n        this.$nextTick(() => {\r\n          this.$store.state.map.map.invalidateSize();\r\n        })\r\n      }\r\n    },\r\n    methods: {\r\n      flipCoords(coords) {\r\n        // console.log('flipCoords is running on:', coords);\r\n        return [coords[1], coords[0]];\r\n      },\r\n      flipCoordsArray(anArray) {\r\n        // console.log('flipCoordsArray is running on:', anArray);\r\n        let newArray = []\r\n        for (let i in anArray) {\r\n          newArray[i] = [anArray[i][1], anArray[i][0]]\r\n        }\r\n        return newArray\r\n      },\r\n      flipCoordsMultiPolygon(aMultiPolygon) {\r\n        // console.log('flipCoordsMultiPolygon is running on:', aMultiPolygon);\r\n        let newArrayArray = []\r\n        for (let i in aMultiPolygon) {\r\n          // console.log('aMultiPolygon[i]', aMultiPolygon[i]);\r\n          let newArray = []\r\n          for (let j in aMultiPolygon[i][0]) {\r\n            // console.log('aMultiPolygon[i][0][j]', aMultiPolygon[i][0][j]);\r\n            newArray[j] = [aMultiPolygon[i][0][j][1], aMultiPolygon[i][0][j][0]]\r\n          }\r\n        newArrayArray[i] = newArray\r\n        }\r\n        return newArrayArray\r\n      },\r\n      shouldShowFeatureLayer(layer) {\r\n        if (layer.rest.layerDefinition) {\r\n          if (layer.rest.layerDefinition.minScale) {\r\n            // console.log('minZoom for', layer.title, 'is', layer.rest.layerDefinition.minScale, typeof layer.rest.layerDefinition.minScale, 'and current scale is', this.scale, typeof this.scale);\r\n            if (this.scale <= layer.rest.layerDefinition.minScale && this.webMapActiveLayers.includes(layer.title)) {\r\n              // console.log('checkLayer used layerDefinition and is returning true for', layer.title);\r\n              return true;\r\n            }\r\n          } else if (layer.rest.layerDefinition.drawingInfo && this.webMapActiveLayers.includes(layer.title)) {\r\n            return true;\r\n          }\r\n        } else if (this.webMapActiveLayers.includes(layer.title)) {\r\n          // console.log('checkLayer is returning true for', layer.title);\r\n          return true;\r\n        } else {\r\n          return false;\r\n        }\r\n      },\r\n      handleMapClick() {\r\n        // console.log('handle map click, e:', e);\r\n        document.getElementsByClassName('pvm-search-control-input')[0].blur()\r\n      },\r\n      handleButtonClick() {\r\n        // console.log('handle button click is running');\r\n        document.getElementsByClassName('pvm-search-control-input')[0].blur()\r\n      },\r\n      handleMapMove(e) {\r\n        // console.log('handleMapMove is running');\r\n        const map = this.$store.state.map.map;\r\n\r\n        const pictometryConfig = this.$config.pictometry || {};\r\n\r\n        const center = map.getCenter();\r\n        const { lat, lng } = center;\r\n        const coords = [lng, lat];\r\n        const zoom = map.getZoom();\r\n        this.$store.commit('setMapZoom', zoom);\r\n        const scale = this.$config.map.scales[zoom];\r\n        this.$store.commit('setMapScale', scale);\r\n\r\n        if (pictometryConfig.enabled) {\r\n          // update state for pictometry\r\n          this.$store.commit('setPictometryMapCenter', coords);\r\n\r\n          const zoom = map.getZoom();\r\n          this.$store.commit('setPictometryMapZoom', zoom);\r\n        }\r\n\r\n        const cyclomediaConfig = this.$config.cyclomedia || {};\r\n\r\n        if (cyclomediaConfig.enabled) {\r\n          // update cyclo recordings\r\n          this.updateCyclomediaRecordings();\r\n          this.$store.commit('setCyclomediaLatLngFromMap', [lat, lng]);\r\n        }\r\n      },\r\n\r\n    }, // end of methods\r\n  }; //end of export\r\n</script>\r\n\r\n<style scoped>\r\n\r\n  /* .map-panel-container {\r\n    height: calc(100vh - 220px);\r\n  }\r\n\r\n  @media screen and (max-width: 40em) {\r\n    .map-panel-container {\r\n      height: calc(100vh - 256px);\r\n    }\r\n  } */\r\n\r\n/*this allows the loading mask to fill the div*/\r\n  .mb-panel-map {\r\n    position: relative;\r\n  }\r\n\r\n  .mb-map-with-widget {\r\n    height: 50%;\r\n  }\r\n\r\n  /* @media (max-width: 1024px) {\r\n    .mb-panel-map {\r\n      height: 600px;\r\n    }\r\n  } */\r\n\r\n  .mb-search-control-container {\r\n    height: 48px;\r\n    border-radius: 2px;\r\n    box-shadow:0 2px 4px rgba(0,0,0,0.2),0 -1px 0px rgba(0,0,0,0.02);\r\n  }\r\n\r\n  .mb-search-control-button {\r\n    color: #fff;\r\n    width: 50px;\r\n    background: #2176d2;\r\n    line-height: 48px;\r\n  }\r\n\r\n  .mb-search-control-input {\r\n    /* background-color: white; */\r\n    border: 0;\r\n    /* height: 48px !important; */\r\n    /* line-height: 48px; */\r\n    padding: 15px;\r\n    /* padding-left: 15px; */\r\n    /* padding-right: 15px; */\r\n    font-family: 'Montserrat', 'Tahoma', sans-serif;\r\n    font-size: 16px;\r\n    width: 275px;\r\n  }\r\n\r\n  /* .mb-map-with-widget {\r\n    height: 50%;\r\n  } */\r\n\r\n  .widget-slot {\r\n    display: inline-block;\r\n    float: left;\r\n  }\r\n\r\n  .mb-map-loading-mask {\r\n    /*display: inline;*/\r\n    position: absolute;\r\n    top: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    background: rgba(0, 0 ,0 , 0.25);\r\n    z-index: 1000;\r\n    text-align: center;\r\n    vertical-align: middle;\r\n  }\r\n\r\n  .mb-map-loading-mask-inner {\r\n    position: absolute;\r\n    top: 40%;\r\n    left: 40%;\r\n  }\r\n\r\n  @media screen and (max-width: 1023px) {\r\n    .mb-search-control-input {\r\n      width: 250px;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 900px) {\r\n    .mb-search-control-input {\r\n      width: 200px;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 800px) {\r\n    .mb-search-control-input {\r\n      width: 150px;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 750px) {\r\n    .mb-search-control-input {\r\n      width: 250px;\r\n    }\r\n  }\r\n\r\n  /* @media screen and (max-width: 639px) {\r\n    .mb-search-control-input {\r\n      width: 250px;\r\n    }\r\n  } */\r\n\r\n  @media screen and (max-width: 450px) {\r\n    .mb-search-control-input {\r\n      width: 200px;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 400px) {\r\n    .mb-search-control-input {\r\n      width: 150px;\r\n    }\r\n  }\r\n\r\n  @media screen and (max-width: 350px) {\r\n    .mb-search-control-input {\r\n      width: 100px;\r\n    }\r\n  }\r\n</style>\r\n","<template>\r\n  <div class=\"cell medium-auto grid-x\" id=\"mb-root\">\r\n    <button class=\"small-24 button datasets-button\"\r\n            @click=\"toggleTopics\"\r\n    >\r\n      {{ this.buttonMessage }}\r\n    </button>\r\n\r\n      <topic-panel v-show=\"shouldShowTopics\" />\r\n      <map-panel v-show=\"shouldShowMap\">\r\n        <cyclomedia-widget v-if=\"this.shouldLoadCyclomediaWidget\"\r\n                           slot=\"cycloWidget\"\r\n                           v-show=\"cyclomediaActive\"\r\n                           screen-percent=\"3\"\r\n        />\r\n        <pictometry-widget v-if=\"this.shouldLoadPictometryWidget\"\r\n                           slot=\"pictWidget\"\r\n                           v-show=\"pictometryActive\"\r\n                           :apiKey=\"this.ak\"\r\n                           :secretKey=\"this.sk\"\r\n        >\r\n          <pictometry-png-marker v-if=\"this.pictometryShowAddressMarker\"\r\n                      :latlng=\"[this.geocodeData.geometry.coordinates[1], this.geocodeData.geometry.coordinates[0]]\"\r\n                      :icon=\"'markers.png'\"\r\n                      :height=\"60\"\r\n                      :width=\"40\"\r\n                      :offsetX=\"0\"\r\n                      :offsetY=\"0\"\r\n          />\r\n          <pictometry-layer v-if=\"this.pictometryActive\" />\r\n          <pictometry-png-marker v-if=\"this.cyclomediaActive && this.pictometryActive\"\r\n                      :latlng=\"cycloLatlng\"\r\n                      :icon=\"'camera2.png'\"\r\n                      :height=\"20\"\r\n                      :width=\"30\"\r\n                      :offsetX=\"-2\"\r\n                      :offsetY=\"-2\"\r\n          />\r\n          <pictometry-view-cone v-if=\"this.cyclomediaActive && this.pictometryActive\"\r\n                     :latlng=\"cycloLatlng\"\r\n                     :rotationAngle=\"cycloRotationAngle\"\r\n                     :hFov=\"cycloHFov\"\r\n          />\r\n        </pictometry-widget>\r\n      </map-panel>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import {\r\n    CyclomediaWidget,\r\n    PictometryWidget,\r\n    PictometryLayer,\r\n    PictometryViewCone,\r\n    PictometryPngMarker\r\n  } from '@cityofphiladelphia/phila-vue-mapping';\r\n\r\n  import axios from 'axios';\r\n  import TopicPanel from './TopicPanel.vue';\r\n  import MapPanel from './MapPanel.vue';\r\n\r\n  export default {\r\n    name: 'Layerboard',\r\n    components: {\r\n      TopicPanel,\r\n      MapPanel,\r\n      CyclomediaWidget,\r\n      PictometryWidget,\r\n      PictometryLayer,\r\n      PictometryViewCone,\r\n      PictometryPngMarker\r\n    },\r\n    mounted() {\r\n      // console.log('cyclo', this.$config.cyclomedia.enabled, CyclomediaWidget);\r\n      window.addEventListener('resize', this.handleWindowResize);\r\n      this.handleWindowResize();\r\n\r\n      const store = this.$store;\r\n      const knackUrl = \"https://api.knackhq.com/v1/objects/object_4/records/export?type=json\";\r\n      const params = {\r\n        // dataType: 'json'\r\n      }\r\n      const headers = {\r\n        'X-Knack-Application-Id': '550c60d00711ffe12e9efc64',\r\n        'X-Knack-REST-API-Key': '7bce4520-28dc-11e5-9f0a-4d758115b820'\r\n      }\r\n      axios.get(knackUrl, { params, headers }).then(response => {\r\n        const dataOut = response.data;\r\n        const records = dataOut.records;\r\n        const recordsFiltered = records.filter(record => record.field_12 === \"API\" || record.field_12 === \"GeoService\");\r\n\r\n        let bennyEndpoints = {};\r\n\r\n        for (let record of recordsFiltered) {\r\n          const url = record.field_25.split('\"')[1];\r\n          let url2;\r\n          if (url) {\r\n            url2 = url.split('query')[0].replace('https://', '').replace('http://', '').replace(/\\/$/, \"\").toLowerCase();\r\n          } else {\r\n            url2 = null;\r\n          }\r\n          if (record.field_13_raw.length > 0) {\r\n              bennyEndpoints[url2] = record.field_13_raw[0].id;\r\n          } else {\r\n              bennyEndpoints[url2] = '';\r\n          }\r\n        }\r\n        store.commit('setBennyEndpoints', bennyEndpoints);\r\n      }, response => {\r\n        console.log('AXIOS ERROR Layerboard.vue');\r\n      });\r\n    },\r\n    computed: {\r\n      isMobileOrTablet() {\r\n        return this.$store.state.isMobileOrTablet;\r\n      },\r\n      shouldLoadCyclomediaWidget() {\r\n        return this.$config.cyclomedia.enabled && !this.isMobileOrTablet;\r\n      },\r\n      shouldLoadPictometryWidget() {\r\n        return this.$config.pictometry.enabled && !this.isMobileOrTablet;\r\n      },\r\n      fullScreenMapEnabled() {\r\n        return this.$store.state.fullScreenMapEnabled;\r\n      },\r\n      cyclomediaActive() {\r\n        return this.$store.state.cyclomedia.active\r\n      },\r\n      cycloLatlng() {\r\n        if (this.$store.state.cyclomedia.orientation.xyz !== null) {\r\n          const xyz = this.$store.state.cyclomedia.orientation.xyz;\r\n          return [xyz[1], xyz[0]];\r\n        } else {\r\n          const center = this.$config.map.center;\r\n          return center;\r\n        }\r\n      },\r\n      cycloRotationAngle() {\r\n        return this.$store.state.cyclomedia.orientation.yaw * (180/3.14159265359);\r\n      },\r\n      cycloHFov() {\r\n        return this.$store.state.cyclomedia.orientation.hFov;\r\n      },\r\n      pictometryActive() {\r\n        return this.$store.state.pictometry.active\r\n      },\r\n      pictometryZoom() {\r\n        return this.$store.state.pictometry.zoom\r\n      },\r\n      pictometryShowAddressMarker() {\r\n        if (!this.pictometryActive || !this.geocodeData) {\r\n          return false;\r\n        } else if (this.pictometryZoom < 20 && this.cyclomediaActive) {\r\n          return false;\r\n        } else {\r\n          return true;\r\n        }\r\n      },\r\n      geocodeData() {\r\n        return this.$store.state.geocode.data\r\n      },\r\n      ak() {\r\n        const host = window.location.hostname;\r\n        if (host === 'atlas.phila.gov') {\r\n          return this.$config.pictometry.apiKey;\r\n        }\r\n        if (host === 'atlas-dev.phila.gov') {\r\n          return this.$config.pictometryDev.apiKey;\r\n        }\r\n        if (host === 'cityatlas.phila.gov') {\r\n          return this.$config.pictometryCity.apiKey;\r\n        }\r\n        if (host === 'cityatlas-dev.phila.gov') {\r\n          return this.$config.pictometryCityDev.apiKey;\r\n        }\r\n        if (host === '10.8.101.67') {\r\n          return this.$config.pictometryLocal.apiKey;\r\n        }\r\n      },\r\n      sk() {\r\n        const host = window.location.hostname;\r\n        if (host === 'atlas.phila.gov') {\r\n          return this.$config.pictometry.secretKey;\r\n        }\r\n        if (host === 'atlas-dev.phila.gov') {\r\n          return this.$config.pictometryDev.secretKey;\r\n        }\r\n        if (host === 'cityatlas.phila.gov') {\r\n          return this.$config.pictometryCity.secretKey;\r\n        }\r\n        if (host === 'cityatlas-dev.phila.gov') {\r\n          return this.$config.pictometryCityDev.secretKey;\r\n        }\r\n        if (host === '10.8.101.67') {\r\n          return this.$config.pictometryLocal.secretKey;\r\n        }\r\n      },\r\n      windowWidth() {\r\n        return this.$store.state.windowWidth;\r\n      },\r\n      windowHeight() {\r\n        return this.$store.state.windowSize.height;\r\n      },\r\n      didToggleTopicsOn() {\r\n        return this.$store.state.didToggleTopicsOn;\r\n      },\r\n      buttonMessage() {\r\n        if (this.didToggleTopicsOn) {\r\n          return 'See Map';\r\n        } else {\r\n          return 'See Datasets';\r\n        }\r\n      },\r\n      shouldShowTopics() {\r\n        return this.$store.state.shouldShowTopics;\r\n      },\r\n      shouldShowMap() {\r\n        return this.$store.state.shouldShowMap;\r\n      }\r\n    },\r\n    watch: {\r\n      pictometryShowAddressMarker(nextValue) {\r\n        // console.log('watch pictometryShowAddressMarker', nextValue);\r\n      },\r\n      windowWidth(nextWidth) {\r\n        this.calculateShouldShowTopics();\r\n        this.calculateShouldShowMap();\r\n      },\r\n      fullScreenMapEnabled(nextValue) {\r\n        this.calculateShouldShowTopics();\r\n        this.calculateShouldShowMap();\r\n      },\r\n      didToggleTopicsOn(nextValue) {\r\n        this.calculateShouldShowTopics();\r\n        this.calculateShouldShowMap();\r\n      },\r\n      shouldShowTopics(nextValue) {\r\n        this.handleWindowResize();\r\n      },\r\n      shouldShowMap(nextValue) {\r\n        this.handleWindowResize();\r\n      }\r\n    },\r\n    methods: {\r\n      // for mobile only\r\n      toggleTopics() {\r\n        const prevVal = this.$store.state.didToggleTopicsOn;\r\n        this.$store.commit('setDidToggleTopicsOn', !prevVal);\r\n      },\r\n      calculateShouldShowTopics() {\r\n        const windowWidth = this.windowWidth;\r\n        const smallScreen = windowWidth < 750;\r\n        const didToggleTopicsOn = this.$store.state.didToggleTopicsOn;\r\n        const fullScreenMapEnabled = this.$store.state.fullScreenMapEnabled;\r\n        // console.log('calculateShouldShowTopics, smallScreen:', smallScreen, 'didToggleTopicsOn', didToggleTopicsOn, 'fullScreenMapEnabled', fullScreenMapEnabled);\r\n        const shouldShowTopics = !smallScreen && !fullScreenMapEnabled || smallScreen && didToggleTopicsOn;\r\n        this.$store.commit('setShouldShowTopics', shouldShowTopics);\r\n      },\r\n      calculateShouldShowMap() {\r\n        const windowWidth = this.windowWidth;\r\n        const notMobile = windowWidth > 750;\r\n        const didToggleTopicsOn = this.$store.state.didToggleTopicsOn;\r\n        const shouldShowMap = notMobile || !didToggleTopicsOn;\r\n        this.$store.commit('setShouldShowMap', shouldShowMap);\r\n      },\r\n      handleWindowResize() {\r\n        const rootElement = document.getElementById('mb-root');\r\n        const rootStyle = window.getComputedStyle(rootElement);\r\n        // const rootHeight = rootStyle.getPropertyValue('height');\r\n        // const rootHeightNum = parseInt(rootHeight.replace('px', ''));\r\n        const rootHeightNum = 100;\r\n        const rootWidth = rootStyle.getPropertyValue('width');\r\n        const rootWidthNum = parseInt(rootWidth.replace('px', ''));\r\n        // let boardHeight;\r\n        const windowWidth = rootWidthNum;\r\n        const notMobile = windowWidth >= 640;\r\n        // console.log('handleWindowResize is running, windowWidth:', windowWidth, 'notMobile:', notMobile, 'this.$store.state.shouldShowTopics:', this.$store.state.shouldShowTopics);\r\n        // if (!notMobile) {\r\n        //   boardHeight = rootHeightNum - 34;\r\n        //   console.log('subtracting 34, rootHeightNum:', rootHeightNum, 'boardHeight:', boardHeight);\r\n        // } else {\r\n        //   boardHeight = rootHeightNum\r\n        //   // console.log('NOT subtracting 34, rootHeightNum:', rootHeightNum, 'boardHeight:', boardHeight);\r\n        // }\r\n        // this.styleObject.height = boardHeight.toString() + 'px';\r\n\r\n        // const obj = {\r\n        //   height: rootHeightNum,\r\n        //   width: rootWidthNum\r\n        // }\r\n        this.$store.commit('setWindowWidth', rootWidthNum);\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n  /*don't highlight any form elements*/\r\n  input:focus,\r\n  select:focus,\r\n  textarea:focus,\r\n  button:focus {\r\n    outline: none;\r\n  }\r\n\r\n  /* standards applies padding to buttons, which causes some weirdness with\r\n  buttons on the map panel. override here. */\r\n  button {\r\n    padding: inherit;\r\n  }\r\n\r\n  .mb-root {\r\n    position: absolute;\r\n    bottom: 0;\r\n    top: 78px;\r\n    left: 0;\r\n    right: 0;\r\n    overflow: auto;\r\n  }\r\n\r\n  .datasets-button {\r\n    display: none;\r\n    margin: 0;\r\n  }\r\n\r\n  .mb-panel {\r\n    height: 100%;\r\n  }\r\n\r\n  /*.mb-panel-topics-with-widget {\r\n    height: 50%;\r\n  }*/\r\n\r\n  /*small devices only*/\r\n  /* @media screen and (max-width: 39.9375em) { */\r\n  @media screen and (max-width: 750px) {\r\n    .datasets-button {\r\n      display: block;\r\n    }\r\n  }\r\n\r\n  /* Medium and up */\r\n  /* @media screen and (min-width: 40em) {\r\n\r\n  } */\r\n\r\n  /* Medium only */\r\n  /* @media screen and (min-width: 40em) and (max-width: 63.9375em) {\r\n\r\n  } */\r\n\r\n  /* Large and up */\r\n  /* @media screen and (min-width: 64em) {\r\n\r\n  } */\r\n\r\n  /* Large only */\r\n  /* @media screen and (min-width: 64em) and (max-width: 74.9375em) {\r\n\r\n  } */\r\n\r\n</style>\r\n","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nvar prefix = 'fas';\nvar iconName = 'info-circle';\nvar width = 512;\nvar height = 512;\nvar ligatures = [];\nvar unicode = 'f05a';\nvar svgPathData = 'M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z';\n\nexports.definition = {\n  prefix: prefix,\n  iconName: iconName,\n  icon: [\n    width,\n    height,\n    ligatures,\n    unicode,\n    svgPathData\n  ]};\n\nexports.faInfoCircle = exports.definition;\nexports.prefix = prefix;\nexports.iconName = iconName;\nexports.width = width;\nexports.height = height;\nexports.ligatures = ligatures;\nexports.unicode = unicode;\nexports.svgPathData = svgPathData;","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nvar prefix = 'fas';\nvar iconName = 'check-square';\nvar width = 448;\nvar height = 512;\nvar ligatures = [];\nvar unicode = 'f14a';\nvar svgPathData = 'M400 480H48c-26.51 0-48-21.49-48-48V80c0-26.51 21.49-48 48-48h352c26.51 0 48 21.49 48 48v352c0 26.51-21.49 48-48 48zm-204.686-98.059l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.248-16.379-6.249-22.628 0L184 302.745l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.25 16.379 6.25 22.628.001z';\n\nexports.definition = {\n  prefix: prefix,\n  iconName: iconName,\n  icon: [\n    width,\n    height,\n    ligatures,\n    unicode,\n    svgPathData\n  ]};\n\nexports.faCheckSquare = exports.definition;\nexports.prefix = prefix;\nexports.iconName = iconName;\nexports.width = width;\nexports.height = height;\nexports.ligatures = ligatures;\nexports.unicode = unicode;\nexports.svgPathData = svgPathData;","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nvar prefix = 'fas';\nvar iconName = 'filter';\nvar width = 512;\nvar height = 512;\nvar ligatures = [];\nvar unicode = 'f0b0';\nvar svgPathData = 'M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z';\n\nexports.definition = {\n  prefix: prefix,\n  iconName: iconName,\n  icon: [\n    width,\n    height,\n    ligatures,\n    unicode,\n    svgPathData\n  ]};\n\nexports.faFilter = exports.definition;\nexports.prefix = prefix;\nexports.iconName = iconName;\nexports.width = width;\nexports.height = height;\nexports.ligatures = ligatures;\nexports.unicode = unicode;\nexports.svgPathData = svgPathData;","'use strict';\nObject.defineProperty(exports, '__esModule', { value: true });\nvar prefix = 'fal';\nvar iconName = 'square';\nvar width = 448;\nvar height = 512;\nvar ligatures = [];\nvar unicode = 'f0c8';\nvar svgPathData = 'M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48zm16 400c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V80c0-8.8 7.2-16 16-16h352c8.8 0 16 7.2 16 16v352z';\n\nexports.definition = {\n  prefix: prefix,\n  iconName: iconName,\n  icon: [\n    width,\n    height,\n    ligatures,\n    unicode,\n    svgPathData\n  ]};\n\nexports.faSquare = exports.definition;\nexports.prefix = prefix;\nexports.iconName = iconName;\nexports.width = width;\nexports.height = height;\nexports.ligatures = ligatures;\nexports.unicode = unicode;\nexports.svgPathData = svgPathData;","/*\r\n.____                             ___.                          .___\r\n|    |   _____  ___.__. __________\\_ |__   _________ _______  __| _/\r\n|    |   \\__  \\<   |  |/ __ \\_  __ \\ __ \\ /  _ \\__  \\\\_  __ \\/ __ |\r\n|    |___ / __ \\\\___  \\  ___/|  | \\/ \\_\\ (  <_> ) __ \\|  | \\/ /_/ |\r\n|_______ (____  / ____|\\___  >__|  |___  /\\____(____  /__|  \\____ |\r\n        \\/    \\/\\/         \\/          \\/           \\/           \\/\r\n*/\r\n\r\nimport Vue from 'vue';\r\nimport axios from 'axios';\r\nimport createStore from './store';\r\nimport configMixin from './util/config-mixin';\r\nimport Layerboard from './components/Layerboard.vue';\r\nimport mergeDeep from './util/merge-deep';\r\n\r\n// Font Awesome Icons\r\nimport { library } from '@fortawesome/fontawesome-svg-core'\r\nimport { faInfoCircle } from '@fortawesome/pro-solid-svg-icons/faInfoCircle';\r\nimport { faCheckSquare } from '@fortawesome/pro-solid-svg-icons/faCheckSquare';\r\nimport { faFilter } from '@fortawesome/pro-solid-svg-icons/faFilter';\r\nimport { faSquare } from '@fortawesome/pro-light-svg-icons/faSquare';\r\nlibrary.add(faInfoCircle, faCheckSquare, faFilter, faSquare);\r\nimport { FontAwesomeIcon } from '@fortawesome/vue-fontawesome'\r\n\r\nimport philaVueDatafetch from '@cityofphiladelphia/phila-vue-datafetch';\r\nconst controllerMixin = philaVueDatafetch.controllerMixin;\r\n\r\nfunction initOpenMaps(clientConfig) {\r\n  const baseConfigUrl = clientConfig.baseConfig;\r\n\r\n  // get base config\r\n  return axios.get(baseConfigUrl).then(response => {\r\n    const data = response.data;\r\n    const baseConfigFn = eval(data);\r\n    const { gatekeeperKey } = clientConfig;\r\n    const baseConfig = baseConfigFn({ gatekeeperKey });\r\n\r\n    // deep merge base config and client config\r\n    const config = mergeDeep(baseConfig, clientConfig);\r\n\r\n    // make config accessible from each component via this.$config\r\n    Vue.use(configMixin, config);\r\n\r\n    // create store\r\n    const store = createStore(config);\r\n\r\n    // mix in controller\r\n    Vue.use(controllerMixin, { config, store });\r\n\r\n    Vue.component('font-awesome-icon', FontAwesomeIcon)\r\n\r\n    // mount main vue\r\n    const vm = new Vue({\r\n      el: config.el || '#layerboard',\r\n      render: (h) => h(Layerboard),\r\n      store\r\n    });\r\n\r\n  }, response => {\r\n    console.error('AXIOS ERROR loading base config');\r\n  });\r\n}\r\n\r\nexport default initOpenMaps;\r\n\r\nexport { Layerboard };\r\n"],"names":["const","userAgent","navigator","vendor","window","opera","test","substr","isObject","item","Array","isArray","mergeDeep","target","source","let","output","Object","assign","keys","forEach","key","pvdStore","philaVueDatafetch","createStore","config","lb","state","isMobileOrTablet","isMobileDevice","fullScreenMapEnabled","bennyEndpoints","layers","layerUrls","inputLayerFilter","inputTagsFilter","map","scale","webMap","webMapUrlLayer","webMapActiveLayers","webMapDisplayedLayers","webMapLayersAndRest","intersectingFeatures","popupCoords","selectedPopupLayer","categories","selectedCategory","candidates","addressEntered","didToggleTopicsOn","shouldShowTopics","shouldShowMap","windowWidth","route","modals","open","getters","mutations","setIsMobileOrTablet","payload","setFullScreenMapEnabled","setCategories","setSelectedCategory","setSelectedPopupLayer","setIntersectingFeatures","setPopupCoords","setBennyEndpoints","setLocation","location","lat","lng","setWatchPositionOn","watchPositionOn","setLayerUrls","setInputLayerFilter","setInputTagsFilter","setMap","setWebMap","setWebMapUrlLayer","setWebMapActiveLayers","setWebMapDisplayedLayers","setWebMapLayersAndRest","setWebMapLayersOpacity","filter","layer","title","layerName","opacity","opa","setLegend","legend","setMapScale","setDidToggleTopicsOn","setShouldShowTopics","setShouldShowMap","setWindowWidth","setRoute","setDidToggleModal","name","setCandidates","setAddressEntered","mergeStore","pvcStore","store","pvmStore","center","zoom","pictometry","Vuex","Store","Vue","mixin","created","this","$config","use","render","components","Checkbox","computed","$store","topicPanelContainerClass","currentWmLayers","currentLayers","tags","toLowerCase","includes","join","category","push","windowSize","methods","handleLayerFilterFormKeyup","e","input","value","commit","handleLayerFilterFormX","handleTagsFilterFormKeyup","handleTagsFilterFormX","didSelectCategory","selected","selectedIndex","preventEnter","keyCode","preventDefault","markers","geocodeGeom","addressMarker","coordinates","reverse","geocodeResult","properties","street_address","prefix","icon","shadow","size","locationMarker","latlng","radius","fillColor","color","weight","fillOpacity","mixins","markersMixin","cyclomediaMixin","pictometryMixin","Map_","Control","MapAddressInput","MapAddressCandidateList","EsriWebMap","EsriWebMapLayer","EsriTiledMapLayer","CircleMarker","VectorMarker","PngMarker","BasemapToggleControl","BasemapSelectControl","FullScreenMapToggleTab","LocationControl","PictometryButton","CyclomediaButton","CyclomediaRecordingCircle","SvgViewConeMarker","MeasureControl","ControlCorner","PopUp","PopUpContent","Polygon_","Polyline_","ModalAbout","mounted","$controller","appDidLoad","mapCenter","addressAutocompleteEnabled","addressInput","autocompleteEnabled","addressInputPosition","addressInputWidth","mapWidth","mapPanelContainerClass","cycloLatlng","cyclomedia","orientation","xyz","cycloRotationAngle","yaw","cycloHFov","hFov","shouldShowCyclomediaButton","enabled","shouldShowPictometryButton","shouldShowPopup","length","selectedPopupLayerGeometryType","feature","geometry","type","selectedPopupLayerCoordinates","selectedPopupLayerCoordinatesFlipped","flipCoords","flipCoordsArray","flipCoordsMultiPolygon","geolocationEnabled","geolocation","activeBasemap","shouldShowImagery","imagery","defaultBasemap","basemap","activeTiles","basemaps","tiledLayers","values","shouldShowImageryToggle","hasImageryBasemaps","imageryBasemaps","imageryYears","x","year","historicBasemaps","hasHistoricBasemaps","historicYears","geocode","data","picOrCycloActive","cyclomediaActive","pictometryActive","measureControlEnabled","defaultAddress","goToDefaultAddress","$cyclomediaRecordingsClient","CyclomediaRecordingsClient","recordingsUrl","username","password","watch","$nextTick","invalidateSize","coords","anArray","newArray","i","aMultiPolygon","newArrayArray","j","shouldShowFeatureLayer","rest","layerDefinition","minScale","drawingInfo","handleMapClick","document","getElementsByClassName","blur","handleButtonClick","handleMapMove","pictometryConfig","getCenter","getZoom","scales","updateCyclomediaRecordings","TopicPanel","MapPanel","CyclomediaWidget","PictometryWidget","PictometryLayer","PictometryViewCone","PictometryPngMarker","addEventListener","handleWindowResize","axios","get","X-Knack-Application-Id","X-Knack-REST-API-Key","then","response","records","record","field_12","url","field_25","split","url2","replace","field_13_raw","id","console","log","shouldLoadCyclomediaWidget","shouldLoadPictometryWidget","active","pictometryZoom","pictometryShowAddressMarker","geocodeData","ak","host","hostname","apiKey","pictometryDev","pictometryCity","pictometryCityDev","pictometryLocal","sk","secretKey","windowHeight","height","buttonMessage","nextValue","nextWidth","calculateShouldShowTopics","calculateShouldShowMap","toggleTopics","prevVal","smallScreen","notMobile","rootElement","getElementById","rootWidth","getComputedStyle","getPropertyValue","rootWidthNum","parseInt","defineProperty","exports","ligatures","svgPathData","iconName","definition","add","faInfoCircle","faCheckSquare","faFilter","faSquare","controllerMixin","initOpenMaps","clientConfig","baseConfigUrl","baseConfig","baseConfigFn","eval","gatekeeperKey","configMixin","component","FontAwesomeIcon","vm","el","h","Layerboard","error"],"mappings":"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"}